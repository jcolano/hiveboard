<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HiveBoard Lite ‚Äî Preview Mockup</title>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600;700&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
:root {
    --idle: #94a3b8;
    --active: #2563eb;
    --success: #16a34a;
    --warning: #d97706;
    --error: #dc2626;
    --stuck: #b91c1c;
    --llm: #7c3aed;
    --bg-deep: #f5f3ef;
    --bg-primary: #ffffff;
    --bg-card: #ffffff;
    --bg-elevated: #fafaf8;
    --bg-hover: #f0eeea;
    --border: #e2e0db;
    --border-subtle: #eceae5;
    --text-primary: #1a1a1a;
    --text-secondary: #4a4a4a;
    --text-muted: #8a8a8a;
    --accent: #c2410c;
    --accent-dim: rgba(194, 65, 12, 0.06);
    --font-mono: 'IBM Plex Mono', monospace;
    --font-sans: 'Plus Jakarta Sans', sans-serif;
    --radius-sm: 6px;
    --radius-md: 10px;
    --radius-lg: 14px;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: var(--font-sans);
    background: var(--bg-deep);
    color: var(--text-primary);
    overflow: hidden;
    height: 100vh;
    -webkit-font-smoothing: antialiased;
}

/* ‚îÄ‚îÄ‚îÄ TOP BAR ‚îÄ‚îÄ‚îÄ */
.topbar {
    display: flex; align-items: center; justify-content: space-between;
    padding: 0 24px; height: 56px; background: var(--bg-primary);
    border-bottom: 1px solid var(--border); flex-shrink: 0;
}
.topbar-left { display: flex; align-items: center; gap: 16px; }
.logo {
    display: flex; align-items: center; gap: 10px;
    font-family: var(--font-sans); font-weight: 800; font-size: 17px;
    letter-spacing: -0.5px; color: var(--text-primary);
}
.logo-hex {
    width: 28px; height: 28px; background: var(--accent);
    clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
    display: flex; align-items: center; justify-content: center; flex-shrink: 0;
}
.logo-hex-inner {
    width: 18px; height: 18px; background: var(--bg-primary);
    clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
}
.logo span { color: var(--accent); }

.workspace-badge {
    font-family: var(--font-mono); font-size: 12px; color: var(--text-muted);
    background: var(--bg-deep); padding: 4px 12px; border-radius: 20px; border: 1px solid var(--border);
}

.view-tabs { display: flex; gap: 4px; background: var(--bg-deep); padding: 4px; border-radius: var(--radius-md); }
.view-tab {
    font-family: var(--font-sans); font-size: 13px; font-weight: 600; color: var(--text-muted);
    padding: 6px 16px; border-radius: var(--radius-sm); cursor: pointer; transition: all 0.2s ease;
    border: none; background: transparent; display: flex; align-items: center; gap: 6px;
}
.view-tab:hover { color: var(--text-secondary); background: var(--bg-hover); }
.view-tab.active { background: var(--bg-primary); color: var(--accent); box-shadow: 0 1px 3px rgba(0,0,0,0.06); }

.topbar-right { display: flex; align-items: center; gap: 16px; }
.status-pill {
    display: flex; align-items: center; gap: 8px; font-family: var(--font-mono);
    font-size: 12px; color: var(--text-muted); background: var(--bg-deep);
    padding: 5px 14px; border-radius: 20px;
}
.status-dot {
    width: 8px; height: 8px; border-radius: 50%; background: var(--success);
    animation: pulse-dot 2.5s ease infinite;
}
@keyframes pulse-dot {
    0%, 100% { opacity: 1; box-shadow: 0 0 0 0 rgba(22,163,74,0.3); }
    50% { opacity: 0.7; box-shadow: 0 0 0 5px rgba(22,163,74,0); }
}
.env-selector {
    font-family: var(--font-sans); font-size: 13px; font-weight: 500;
    background: var(--bg-primary); border: 1px solid var(--border);
    color: var(--text-secondary); padding: 6px 14px; border-radius: var(--radius-sm); cursor: pointer;
}

/* ‚îÄ‚îÄ‚îÄ MAIN LAYOUT ‚îÄ‚îÄ‚îÄ */
.main-layout {
    display: grid; grid-template-columns: 300px 1fr 340px;
    height: calc(100vh - 56px); gap: 0;
}

/* ‚îÄ‚îÄ‚îÄ LEFT PANEL ‚îÄ‚îÄ‚îÄ */
.hive-panel {
    background: var(--bg-primary); border-right: 1px solid var(--border);
    display: flex; flex-direction: column; overflow: hidden;
}
.panel-header {
    padding: 16px 20px; border-bottom: 1px solid var(--border);
    display: flex; align-items: center; justify-content: space-between; flex-shrink: 0;
}
.panel-header-group { display: flex; align-items: center; gap: 10px; }
.panel-title { font-family: var(--font-sans); font-size: 14px; font-weight: 700; color: var(--text-primary); }
.panel-count { font-family: var(--font-mono); font-size: 11px; color: var(--text-muted); background: var(--bg-deep); padding: 3px 10px; border-radius: 20px; }
.attention-badge {
    font-family: var(--font-sans); font-size: 11px; font-weight: 700; color: #fff;
    background: var(--error); padding: 2px 10px; border-radius: 20px;
    animation: att-pulse 2s ease infinite;
}
@keyframes att-pulse {
    0%, 100% { box-shadow: 0 0 0 0 rgba(220,38,38,0.3); }
    50% { box-shadow: 0 0 0 5px rgba(220,38,38,0); }
}

.hive-list { flex: 1; overflow-y: auto; padding: 12px; }
.hive-list::-webkit-scrollbar { width: 5px; }
.hive-list::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

.agent-card {
    background: var(--bg-card); border: 1.5px solid var(--border);
    border-radius: var(--radius-md); padding: 14px 16px; margin-bottom: 8px;
    cursor: pointer; transition: all 0.15s ease;
}
.agent-card:hover { background: var(--bg-hover); border-color: #ccc; box-shadow: 0 2px 8px rgba(0,0,0,0.04); }
.agent-card.selected { border-color: var(--accent); background: var(--accent-dim); box-shadow: 0 0 0 3px rgba(194,65,12,0.08); }
.agent-card.urgency-glow { border-color: rgba(220,38,38,0.4) !important; box-shadow: 0 0 0 3px rgba(220,38,38,0.06), 0 2px 8px rgba(220,38,38,0.08); }
.agent-card-top { display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; }
.agent-name { font-family: var(--font-sans); font-size: 14px; font-weight: 700; color: var(--text-primary); }

.agent-status-badge {
    font-family: var(--font-sans); font-size: 11px; font-weight: 700;
    text-transform: uppercase; letter-spacing: 0.5px; padding: 3px 10px; border-radius: 20px;
}
.badge-processing { background: rgba(37,99,235,0.1); color: var(--active); }
.badge-idle { background: rgba(148,163,184,0.12); color: var(--idle); }
.badge-error { background: rgba(220,38,38,0.1); color: var(--error); }
.badge-stuck { background: rgba(185,28,28,0.12); color: var(--stuck); animation: stuck-blink 1.5s ease infinite; }
.badge-waiting { background: rgba(217,119,6,0.1); color: var(--warning); }
@keyframes stuck-blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }

.agent-card-meta { display: flex; align-items: center; gap: 12px; font-size: 13px; color: var(--text-muted); }
.agent-type-label { font-family: var(--font-mono); font-size: 11px; color: var(--text-muted); background: var(--bg-deep); padding: 2px 8px; border-radius: 4px; }
.heartbeat-indicator { display: flex; align-items: center; gap: 5px; font-family: var(--font-mono); font-size: 12px; color: var(--text-muted); }
.hb-dot { width: 6px; height: 6px; border-radius: 50%; }
.hb-fresh { background: var(--success); }
.hb-stale { background: var(--warning); }

.agent-card-pipeline { display: flex; align-items: center; gap: 8px; margin-top: 10px; flex-wrap: wrap; }
.queue-badge { font-family: var(--font-mono); font-size: 12px; font-weight: 600; color: var(--active); background: rgba(37,99,235,0.08); padding: 2px 8px; border-radius: 4px; }
.queue-badge.high { color: var(--warning); background: rgba(217,119,6,0.08); }
.issue-indicator { display: flex; align-items: center; gap: 4px; font-family: var(--font-sans); font-size: 12px; font-weight: 600; color: var(--error); }
.issue-dot { width: 6px; height: 6px; border-radius: 50%; background: var(--error); }

.sparkline-row { margin-top: 10px; display: flex; align-items: flex-end; gap: 2px; height: 22px; }
.spark-bar { flex: 1; min-width: 3px; border-radius: 2px 2px 0 0; opacity: 0.35; }
.agent-card:hover .spark-bar { opacity: 0.6; }

.agent-task-info { margin-top: 10px; padding-top: 10px; border-top: 1px solid var(--border-subtle); font-family: var(--font-mono); font-size: 12px; color: var(--text-secondary); display: flex; align-items: center; gap: 6px; }

/* ‚îÄ‚îÄ‚îÄ CENTER PANEL ‚îÄ‚îÄ‚îÄ */
.center-panel { display: flex; flex-direction: column; overflow: hidden; background: var(--bg-deep); }
.center-view { display: none; flex-direction: column; flex: 1; overflow: hidden; }
.center-view.active { display: flex; }

.summary-bar { display: flex; gap: 1px; background: var(--border); flex-shrink: 0; }
.summary-stat { flex: 1; background: var(--bg-primary); padding: 16px 20px; display: flex; flex-direction: column; gap: 4px; }
.summary-stat:first-child { padding-left: 24px; }
.stat-label { font-family: var(--font-sans); font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.8px; color: var(--text-muted); }
.stat-value { font-family: var(--font-sans); font-size: 22px; font-weight: 800; color: var(--text-primary); letter-spacing: -0.5px; }
.stat-value.green { color: var(--success); }
.stat-value.amber { color: var(--warning); }
.stat-value.red { color: var(--error); }
.stat-value.blue { color: var(--active); }
.stat-value.purple { color: var(--llm); }

.metrics-row { display: flex; gap: 1px; background: var(--border); flex-shrink: 0; }
.metric-cell { flex: 1; background: var(--bg-primary); padding: 12px 16px; display: flex; flex-direction: column; gap: 6px; }
.metric-chart { display: flex; align-items: flex-end; gap: 3px; height: 28px; }
.metric-bar { flex: 1; border-radius: 2px 2px 0 0; min-width: 5px; }

/* ‚îÄ‚îÄ‚îÄ TIMELINE ‚îÄ‚îÄ‚îÄ */
.timeline-section { flex: 1 1 40%; display: flex; flex-direction: column; overflow: hidden; min-height: 120px; max-height: 45%; }
.timeline-header {
    padding: 16px 24px; border-bottom: 1px solid var(--border);
    display: flex; align-items: center; justify-content: space-between;
    flex-shrink: 0; background: var(--bg-primary);
}
.timeline-header-left { display: flex; align-items: center; gap: 14px; }
.timeline-task-id { font-family: var(--font-mono); font-size: 13px; font-weight: 600; color: var(--accent); }
.timeline-task-meta { font-family: var(--font-mono); font-size: 12px; color: var(--text-muted); display: flex; gap: 16px; }

.plan-bar { padding: 10px 24px; background: var(--bg-primary); border-bottom: 1px solid var(--border); flex-shrink: 0; }
.plan-bar-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px; }
.plan-bar-label { font-family: var(--font-sans); font-size: 12px; font-weight: 600; color: var(--text-muted); }
.plan-bar-progress { font-family: var(--font-mono); font-size: 11px; color: var(--text-secondary); }
.plan-steps { display: flex; gap: 4px; height: 20px; }
.plan-step { flex: 1; border-radius: var(--radius-sm); }
.plan-step.completed { background: var(--success); opacity: 0.65; }
.plan-step.active { background: var(--active); animation: plan-pulse 1.5s ease infinite; }
.plan-step.failed { background: var(--error); opacity: 0.65; }
.plan-step.pending { background: var(--bg-elevated); border: 1.5px solid var(--border); }
@keyframes plan-pulse { 0%, 100% { opacity: 0.65; } 50% { opacity: 1; } }

.timeline-canvas { flex: 1; overflow-x: auto; padding: 44px 24px 24px; background: var(--bg-deep); position: relative; }
.timeline-track { display: flex; align-items: center; gap: 0; min-width: max-content; padding: 10px 0; }
.tl-node { display: flex; flex-direction: column; align-items: center; position: relative; cursor: pointer; }
.tl-node-dot { width: 16px; height: 16px; border-radius: 50%; border: 2.5px solid; background: var(--bg-deep); z-index: 2; transition: transform 0.15s; }
.tl-node:hover .tl-node-dot { transform: scale(1.35); }
.tl-node-label { position: absolute; top: -28px; font-family: var(--font-mono); font-size: 11px; font-weight: 500; white-space: nowrap; color: var(--text-muted); }
.tl-node-time { position: absolute; bottom: -24px; font-family: var(--font-mono); font-size: 11px; color: var(--text-muted); white-space: nowrap; }
.tl-connector { height: 2px; min-width: 50px; position: relative; display: flex; align-items: center; justify-content: center; }
.tl-connector-line { width: 100%; height: 2px; border-radius: 1px; }
.tl-connector-duration { position: absolute; font-family: var(--font-mono); font-size: 11px; color: var(--text-muted); top: -16px; white-space: nowrap; background: var(--bg-deep); padding: 0 6px; }

.permalink-btn {
    font-family: var(--font-sans); font-size: 12px; font-weight: 500; color: var(--text-muted);
    cursor: pointer; padding: 5px 14px; border: 1px solid var(--border); border-radius: var(--radius-sm);
}

/* ‚îÄ‚îÄ‚îÄ TASKS TABLE ‚îÄ‚îÄ‚îÄ */
.tasks-table-section { flex: 1 1 auto; min-height: 200px; overflow-y: auto; border-top: 1px solid var(--border); }
.tasks-table { width: 100%; border-collapse: collapse; font-size: 13px; }
.tasks-table thead { position: sticky; top: 0; z-index: 5; background: var(--bg-primary); }
.tasks-table th { text-align: left; padding: 10px 14px; font-family: var(--font-sans); font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.8px; color: var(--text-muted); border-bottom: 1px solid var(--border); }
.tasks-table td { padding: 10px 14px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); font-family: var(--font-mono); font-size: 13px; }
.tasks-table tr { cursor: pointer; transition: background 0.1s; }
.tasks-table tbody tr:hover { background: var(--bg-hover); }
.tasks-table tbody tr.selected-row { background: var(--accent-dim); }
.task-status-dot { display: inline-block; width: 7px; height: 7px; border-radius: 50%; margin-right: 7px; vertical-align: middle; }
.task-llm-badge { font-family: var(--font-mono); font-size: 12px; color: var(--llm); background: rgba(124,58,237,0.08); padding: 2px 7px; border-radius: 4px; }

/* ‚îÄ‚îÄ‚îÄ RIGHT PANEL ‚îÄ‚îÄ‚îÄ */
.stream-panel { background: var(--bg-primary); border-left: 1px solid var(--border); display: flex; flex-direction: column; overflow: hidden; }
.stream-filters { padding: 10px 14px; display: flex; gap: 5px; flex-wrap: wrap; border-bottom: 1px solid var(--border); flex-shrink: 0; }
.filter-chip {
    font-family: var(--font-sans); font-size: 11px; font-weight: 500;
    padding: 4px 10px; border-radius: 20px; border: 1px solid var(--border);
    color: var(--text-muted); cursor: pointer;
}
.filter-chip.active { background: var(--accent-dim); border-color: var(--accent); color: var(--accent); font-weight: 600; }

.live-badge { display: flex; align-items: center; gap: 5px; font-family: var(--font-sans); font-size: 11px; font-weight: 600; color: var(--success); text-transform: uppercase; }
.live-dot { width: 7px; height: 7px; border-radius: 50%; background: var(--success); animation: pulse-dot 2.5s ease infinite; }

.stream-list { flex: 1; overflow-y: auto; padding: 8px; }
.stream-list::-webkit-scrollbar { width: 5px; }
.stream-list::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

.stream-event { padding: 10px 12px; border-bottom: 1px solid var(--border-subtle); border-radius: var(--radius-sm); margin-bottom: 2px; }
.stream-event:hover { background: var(--bg-hover); }
.stream-event-top { display: flex; align-items: center; justify-content: space-between; margin-bottom: 4px; }
.stream-event-type { font-family: var(--font-sans); font-size: 12px; font-weight: 600; display: flex; align-items: center; gap: 6px; }
.event-type-dot { width: 6px; height: 6px; border-radius: 50%; flex-shrink: 0; }
.stream-event-time { font-family: var(--font-mono); font-size: 11px; color: var(--text-muted); }
.stream-event-body { font-size: 13px; color: var(--text-secondary); line-height: 1.5; }
.stream-event-agent { font-family: var(--font-mono); font-size: 12px; color: var(--text-muted); margin-bottom: 3px; }
    </style>
</head>
<body>
    <!-- TOP BAR -->
    <div class="topbar">
        <div class="topbar-left">
            <div class="logo">
                <div class="logo-hex"><div class="logo-hex-inner"></div></div>
                Hive<span>Board</span>
            </div>
            <div class="workspace-badge">production</div>
            <div class="view-tabs">
                <button class="view-tab active">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
                    Dashboard
                </button>
                <button class="view-tab">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/></svg>
                    Costs
                </button>
            </div>
        </div>
        <div class="topbar-right">
            <div class="status-pill">
                <div class="status-dot"></div>
                <span>Connected</span>
            </div>
            <select class="env-selector">
                <option>production</option>
                <option>staging</option>
            </select>
        </div>
    </div>

    <!-- MAIN LAYOUT -->
    <div class="main-layout">
        <!-- LEFT: AGENTS -->
        <div class="hive-panel">
            <div class="panel-header">
                <div class="panel-header-group">
                    <div class="panel-title">Agents</div>
                    <div class="attention-badge">1 ‚ö†</div>
                </div>
                <div class="panel-count">3 agents</div>
            </div>
            <div class="hive-list" id="hiveList"></div>
        </div>

        <!-- CENTER -->
        <div class="center-panel">
            <div class="center-view active">
                <!-- Summary -->
                <div class="summary-bar" id="summaryBar"></div>
                <!-- Metrics -->
                <div class="metrics-row" id="metricsRow"></div>
                <!-- Timeline -->
                <div class="timeline-section">
                    <div class="timeline-header">
                        <div class="timeline-header-left">
                            <div class="panel-title">Timeline</div>
                            <div class="timeline-task-id">task-lead-4801</div>
                            <div class="timeline-task-meta">
                                <span>‚è± 14.2s</span>
                                <span>ü§ñ sales</span>
                                <span style="color: var(--success);">‚úì completed</span>
                                <span style="color: var(--llm);">‚óÜ 5 LLM</span>
                            </div>
                        </div>
                        <div class="permalink-btn">‚ßâ Permalink</div>
                    </div>
                    <div class="plan-bar">
                        <div class="plan-bar-header">
                            <div class="plan-bar-label">Plan ¬∑ 4 steps</div>
                            <div class="plan-bar-progress">3/4 completed</div>
                        </div>
                        <div class="plan-steps">
                            <div class="plan-step completed"></div>
                            <div class="plan-step completed"></div>
                            <div class="plan-step failed"></div>
                            <div class="plan-step pending"></div>
                        </div>
                    </div>
                    <div class="timeline-canvas" id="timelineCanvas"></div>
                </div>
                <!-- Tasks -->
                <div class="tasks-table-section">
                    <table class="tasks-table">
                        <thead><tr><th>Task ID</th><th>Agent</th><th>Type</th><th>Status</th><th>Duration</th><th>LLM</th><th>Cost</th><th>Time</th></tr></thead>
                        <tbody id="tasksBody"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- RIGHT: ACTIVITY -->
        <div class="stream-panel">
            <div class="panel-header">
                <div class="panel-header-group">
                    <div class="panel-title">Activity</div>
                    <div class="live-badge"><div class="live-dot"></div> Live</div>
                </div>
                <div class="panel-count">24 events</div>
            </div>
            <div class="stream-filters" id="streamFilters"></div>
            <div class="stream-list" id="streamList"></div>
        </div>
    </div>

    <script>
    // ‚îÄ‚îÄ Mock data to populate the preview ‚îÄ‚îÄ

    // Agents
    document.getElementById('hiveList').innerHTML = `
        <div class="agent-card urgency-glow">
            <div class="agent-card-top">
                <div class="agent-name">sales</div>
                <div class="agent-status-badge badge-error">ERROR</div>
            </div>
            <div class="agent-card-meta">
                <div class="agent-type-label">sales</div>
                <div class="heartbeat-indicator"><div class="hb-dot hb-stale"></div>2m ago</div>
            </div>
            <div class="agent-card-pipeline">
                <span class="queue-badge high">Q:8</span>
                <span class="issue-indicator"><span class="issue-dot"></span>1 issue</span>
            </div>
            <div class="agent-task-info"><span style="opacity:0.5">‚Ü≥</span> task-lead-acme-corp</div>
            <div class="sparkline-row">${[3,5,7,4,2,8,6,3,1,0,0,0].map(v=>`<div class="spark-bar" style="height:${v*2+2}px; background:var(--error)"></div>`).join('')}</div>
        </div>

        <div class="agent-card selected">
            <div class="agent-card-top">
                <div class="agent-name">main</div>
                <div class="agent-status-badge badge-processing">PROCESSING</div>
            </div>
            <div class="agent-card-meta">
                <div class="agent-type-label">general</div>
                <div class="heartbeat-indicator"><div class="hb-dot hb-fresh"></div>12s ago</div>
            </div>
            <div class="agent-card-pipeline">
                <span class="queue-badge">Q:2</span>
            </div>
            <div class="agent-task-info"><span style="opacity:0.5">‚Ü≥</span> task-lead-4801</div>
            <div class="sparkline-row">${[2,4,3,5,6,4,5,7,6,4,5,3].map(v=>`<div class="spark-bar" style="height:${v*2+2}px; background:var(--active)"></div>`).join('')}</div>
        </div>

        <div class="agent-card">
            <div class="agent-card-top">
                <div class="agent-name">support</div>
                <div class="agent-status-badge badge-waiting">WAITING</div>
            </div>
            <div class="agent-card-meta">
                <div class="agent-type-label">support</div>
                <div class="heartbeat-indicator"><div class="hb-dot hb-fresh"></div>8s ago</div>
            </div>
            <div class="agent-card-pipeline">
                <span class="queue-badge">Q:1</span>
            </div>
            <div class="sparkline-row">${[1,2,1,3,2,1,2,3,1,2,1,1].map(v=>`<div class="spark-bar" style="height:${v*2+2}px; background:var(--active)"></div>`).join('')}</div>
        </div>
    `;

    // Summary
    document.getElementById('summaryBar').innerHTML = `
        <div class="summary-stat"><div class="stat-label">Total Agents</div><div class="stat-value">3</div></div>
        <div class="summary-stat"><div class="stat-label">Processing</div><div class="stat-value blue">1</div></div>
        <div class="summary-stat"><div class="stat-label">Waiting</div><div class="stat-value amber">1</div></div>
        <div class="summary-stat"><div class="stat-label">Stuck</div><div class="stat-value">0</div></div>
        <div class="summary-stat"><div class="stat-label">Errors</div><div class="stat-value red">1</div></div>
        <div class="summary-stat"><div class="stat-label">Success Rate (1h)</div><div class="stat-value green">87%</div></div>
        <div class="summary-stat"><div class="stat-label">Avg Duration</div><div class="stat-value">18.4s</div></div>
        <div class="summary-stat"><div class="stat-label">Cost (1h)</div><div class="stat-value purple">$4.72</div></div>
    `;

    // Metrics
    const metricDefs = [
        { label: 'Throughput (1h)', data: [3,5,4,6,5,7,6,8,7,5,6,4,5,6,7,5], color: 'var(--active)' },
        { label: 'Success Rate', data: [90,92,88,95,87,90,93,85,88,91,90,87,89,92,88,87], color: 'var(--success)', max: 100 },
        { label: 'Errors', data: [1,0,1,0,1,0,0,2,1,0,1,1,0,1,0,1], color: 'var(--error)' },
        { label: 'LLM Cost/Task', data: [3,4,3,5,4,3,4,6,5,4,3,4,5,4,3,4], color: 'var(--llm)' },
    ];
    document.getElementById('metricsRow').innerHTML = metricDefs.map(m => {
        const mx = m.max || Math.max(...m.data, 1);
        return `<div class="metric-cell"><div class="stat-label">${m.label}</div><div class="metric-chart">${m.data.map(v => `<div class="metric-bar" style="height:${(v/mx)*28+2}px; background:${m.color}; opacity:0.5;"></div>`).join('')}</div></div>`;
    }).join('');

    // Timeline
    const tlNodes = [
        { label: 'task started', type: 'system', time: '09:15:01' },
        { label: 'crm_search', type: 'action', time: '09:15:02', dur: '0.8s' },
        { label: 'phase 1', type: 'llm', time: '09:15:03', dur: '1.2s', model: 'claude-sonnet-4-5' },
        { label: 'crm_write', type: 'action', time: '09:15:05', dur: '0.5s' },
        { label: 'phase 2', type: 'llm', time: '09:15:06', dur: '1.4s', model: 'claude-sonnet-4-5' },
        { label: 'email_send', type: 'error', time: '09:15:08', dur: '0.3s' },
        { label: 'reflection', type: 'warning', time: '09:15:09', dur: '0.6s' },
        { label: 'phase 3', type: 'llm', time: '09:15:10', dur: '1.1s', model: 'claude-sonnet-4-5' },
        { label: 'dm_notify', type: 'action', time: '09:15:12', dur: '0.4s' },
        { label: 'completed', type: 'success', time: '09:15:14' },
    ];
    const typeColor = { system:'var(--idle)', action:'var(--active)', llm:'var(--llm)', error:'var(--error)', warning:'var(--warning)', success:'var(--success)' };

    let tlHtml = '<div class="timeline-track">';
    tlNodes.forEach((n, i) => {
        const c = typeColor[n.type];
        const filled = n.type === 'success' || n.type === 'error';
        const isLlm = n.type === 'llm';
        tlHtml += `<div class="tl-node${isLlm ? ' llm-node' : ''}">`;
        tlHtml += `<div class="tl-node-label" style="color:${c}">${n.label}</div>`;
        tlHtml += `<div class="tl-node-dot" style="border-color:${c};${filled ? 'background:'+c : ''}${isLlm ? ';border-radius:5px;width:18px;height:18px' : ''}"></div>`;
        tlHtml += `<div class="tl-node-time">${n.time}</div></div>`;
        if (i < tlNodes.length - 1) {
            const nc = typeColor[tlNodes[i+1].type];
            tlHtml += `<div class="tl-connector" style="width:70px"><div class="tl-connector-line" style="background:linear-gradient(to right,${c},${nc});opacity:0.35"></div>${tlNodes[i+1].dur ? `<div class="tl-connector-duration">${tlNodes[i+1].dur}</div>` : ''}</div>`;
        }
    });
    tlHtml += '</div>';
    document.getElementById('timelineCanvas').innerHTML = tlHtml;

    // Tasks
    const tasks = [
        { id: 'task-lead-4801', agent: 'sales', type: 'webhook', status: 'completed', dur: '14.2s', llm: 5, cost: '$0.04', time: '2m ago', color: 'var(--success)' },
        { id: 'task-lead-acme', agent: 'sales', type: 'webhook', status: 'failed', dur: '47.1s', llm: 12, cost: '$0.18', time: '5m ago', color: 'var(--error)' },
        { id: 'task-hb-main-9', agent: 'main', type: 'heartbeat', status: 'processing', dur: '3.1s', llm: 2, cost: '$0.01', time: 'just now', color: 'var(--active)' },
        { id: 'task-credit-450', agent: 'support', type: 'webhook', status: 'waiting', dur: '‚Äî', llm: 3, cost: '$0.02', time: '8m ago', color: 'var(--warning)' },
        { id: 'task-lead-4800', agent: 'sales', type: 'webhook', status: 'completed', dur: '11.8s', llm: 4, cost: '$0.03', time: '12m ago', color: 'var(--success)' },
    ];
    document.getElementById('tasksBody').innerHTML = tasks.map((t, i) => `
        <tr class="${i === 0 ? 'selected-row' : ''}">
            <td style="color:var(--accent);font-weight:500">${t.id}</td>
            <td>${t.agent}</td>
            <td>${t.type}</td>
            <td><span class="task-status-dot" style="background:${t.color}"></span>${t.status}</td>
            <td>${t.dur}</td>
            <td><span class="task-llm-badge">‚óÜ ${t.llm}</span></td>
            <td>${t.cost}</td>
            <td style="color:var(--text-muted)">${t.time}</td>
        </tr>
    `).join('');

    // Stream filters
    const filters = ['all', 'task', 'action', 'error', 'llm', 'pipeline', 'human'];
    document.getElementById('streamFilters').innerHTML = filters.map((f, i) =>
        `<div class="filter-chip ${i === 0 ? 'active' : ''}">${f}</div>`
    ).join('');

    // Stream events
    const events = [
        { type: 'task_completed', agent: 'sales', task: 'task-lead-4801', summary: 'Processed Greenleaf lead', time: '2m ago', color: 'var(--success)' },
        { type: 'llm_call', agent: 'main', task: 'task-hb-main-9', summary: 'claude-sonnet-4-5 ¬∑ 1.2K tokens', time: 'just now', color: 'var(--llm)', icon: '‚óÜ' },
        { type: 'action_completed', agent: 'sales', task: 'task-lead-4801', summary: 'crm_write ‚Üí contact_8821 created', time: '2m ago', color: 'var(--active)' },
        { type: 'action_failed', agent: 'sales', task: 'task-lead-acme', summary: 'crm_search ‚Üí 403 Forbidden', time: '5m ago', color: 'var(--error)' },
        { type: 'issue', agent: 'sales', summary: 'CRM API returning 403', time: '5m ago', color: 'var(--error)', icon: '‚öë' },
        { type: 'approval_requested', agent: 'support', task: 'task-credit-450', summary: 'Credit $450 for BlueStar', time: '8m ago', color: 'var(--warning)' },
        { type: 'task_started', agent: 'main', task: 'task-hb-main-9', summary: 'Heartbeat check', time: 'just now', color: 'var(--active)' },
        { type: 'queue_snapshot', agent: 'sales', summary: 'depth: 8, oldest: 47m', time: '1m ago', color: 'var(--text-muted)', icon: '‚äû' },
    ];
    document.getElementById('streamList').innerHTML = events.map(e => `
        <div class="stream-event">
            <div class="stream-event-top">
                <div class="stream-event-type" style="color:${e.color}">
                    <div class="event-type-dot" style="background:${e.color}"></div>
                    ${e.icon ? `<span>${e.icon}</span>` : ''}${e.type}
                </div>
                <div class="stream-event-time">${e.time}</div>
            </div>
            <div class="stream-event-body">
                <div class="stream-event-agent">${e.agent}${e.task ? ' ‚Ä∫ '+e.task : ''}</div>
                ${e.summary}
            </div>
        </div>
    `).join('');
    </script>
</body>
</html>
