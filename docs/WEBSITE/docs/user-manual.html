<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HiveLoop SDK Manual — HiveBoard Docs</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600;700&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
<style>
/* ═══════════════════════════════════════
   DESIGN TOKENS (HiveBoard system)
   ═══════════════════════════════════════ */
:root {
    --accent: #c2410c;
    --accent-dim: rgba(194, 65, 12, 0.06);
    --accent-hover: #a93b0b;
    --accent-light: rgba(194, 65, 12, 0.1);
    --font-mono: 'IBM Plex Mono', monospace;
    --font-sans: 'Plus Jakarta Sans', sans-serif;
    --radius-sm: 6px;
    --radius-md: 10px;
    --bg-deep: #f5f3ef;
    --bg-primary: #ffffff;
    --bg-card: #ffffff;
    --bg-elevated: #fafaf8;
    --bg-hover: #f0eeea;
    --border: #e2e0db;
    --border-subtle: #eceae5;
    --text-primary: #1a1a1a;
    --text-secondary: #4a4a4a;
    --text-muted: #8a8a8a;
    --success: #16a34a;
    --success-dim: rgba(22, 163, 74, 0.08);
    --error: #dc2626;
    --error-dim: rgba(220, 38, 38, 0.06);
    --warning: #d97706;
    --warning-dim: rgba(217, 119, 6, 0.08);
    --info: #2563eb;
    --info-dim: rgba(37, 99, 235, 0.06);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: var(--font-sans);
    background: var(--bg-deep);
    color: var(--text-primary);
    -webkit-font-smoothing: antialiased;
    min-height: 100vh;
}

@keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
@keyframes fade-in-up { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }

/* ═══════════════════════════════════════
   TOP BAR
   ═══════════════════════════════════════ */
.topbar {
    display: flex; align-items: center; justify-content: space-between;
    padding: 0 24px; height: 56px;
    background: var(--bg-primary); border-bottom: 1px solid var(--border);
    position: fixed; top: 0; left: 0; right: 0; z-index: 100;
}
.topbar-left { display: flex; align-items: center; gap: 20px; }
.logo {
    display: flex; align-items: center; gap: 10px;
    font-family: var(--font-sans); font-weight: 800; font-size: 17px;
    letter-spacing: -0.5px; text-decoration: none; color: var(--text-primary);
}
.logo-hex {
    width: 28px; height: 28px; background: var(--accent);
    clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
    display: flex; align-items: center; justify-content: center; flex-shrink: 0;
}
.logo-hex-inner {
    width: 18px; height: 18px; background: var(--bg-primary);
    clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
}
.logo span { color: var(--accent); }

.docs-badge {
    font-family: var(--font-mono); font-size: 11px; font-weight: 600;
    color: var(--accent); background: var(--accent-dim);
    padding: 3px 10px; border-radius: 4px;
    text-transform: uppercase; letter-spacing: 0.5px;
    border: 1px solid rgba(194, 65, 12, 0.12);
}

.topbar-right { display: flex; align-items: center; gap: 12px; }
.topbar-link {
    font-family: var(--font-sans); font-size: 13px; font-weight: 600;
    color: var(--text-secondary); text-decoration: none;
    padding: 7px 14px; border-radius: var(--radius-sm);
    transition: all 0.15s; border: 1px solid transparent;
}
.topbar-link:hover { background: var(--bg-hover); color: var(--text-primary); }
.topbar-link.primary {
    color: #fff; background: var(--accent); border-color: var(--accent);
}
.topbar-link.primary:hover { background: var(--accent-hover); }

/* ═══════════════════════════════════════
   LAYOUT
   ═══════════════════════════════════════ */
.docs-layout {
    display: flex; min-height: 100vh; padding-top: 56px;
}

/* ─── LEFT SIDEBAR ─── */
.docs-sidebar {
    width: 260px; flex-shrink: 0;
    background: var(--bg-primary);
    border-right: 1px solid var(--border);
    padding: 20px 12px;
    position: fixed; top: 56px; bottom: 0; left: 0;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: var(--border) transparent;
}
.docs-sidebar::-webkit-scrollbar { width: 4px; }
.docs-sidebar::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }

.docs-nav-section {
    font-family: var(--font-sans); font-size: 10px; font-weight: 700;
    text-transform: uppercase; letter-spacing: 0.8px;
    color: var(--text-muted); padding: 16px 12px 6px;
}
.docs-nav-section:first-child { padding-top: 0; }

.docs-nav-item {
    display: flex; align-items: center; gap: 10px;
    padding: 9px 12px; border-radius: var(--radius-sm);
    font-family: var(--font-sans); font-size: 13.5px; font-weight: 500;
    color: var(--text-secondary); text-decoration: none;
    transition: all 0.12s; border: 1px solid transparent;
}
.docs-nav-item:hover {
    background: var(--bg-hover); color: var(--text-primary);
}
.docs-nav-item.active {
    background: var(--accent-dim); color: var(--accent);
    font-weight: 600; border-color: rgba(194, 65, 12, 0.1);
}
.docs-nav-icon {
    width: 18px; height: 18px; flex-shrink: 0; opacity: 0.5;
    display: flex; align-items: center;
}
.docs-nav-icon svg { width: 18px; height: 18px; }
.docs-nav-item.active .docs-nav-icon { opacity: 1; color: var(--accent); }

/* ─── MAIN CONTENT ─── */
.docs-main {
    flex: 1; margin-left: 260px; margin-right: 220px;
    padding: 40px 48px 80px;
    max-width: 820px;
    animation: fade-in 0.3s ease;
}

/* ─── RIGHT TOC ─── */
.page-toc {
    position: fixed; top: 96px; right: 24px;
    width: 196px; max-height: calc(100vh - 120px);
    overflow-y: auto; scrollbar-width: thin;
    scrollbar-color: var(--border) transparent;
}
.page-toc::-webkit-scrollbar { width: 3px; }
.page-toc::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }

.page-toc-title {
    font-family: var(--font-sans); font-size: 10px; font-weight: 700;
    text-transform: uppercase; letter-spacing: 0.8px;
    color: var(--text-muted); padding-bottom: 8px;
    border-bottom: 1px solid var(--border-subtle);
    margin-bottom: 8px;
}
.toc-link {
    display: block; padding: 4px 0;
    font-family: var(--font-sans); font-size: 12.5px; font-weight: 500;
    color: var(--text-muted); text-decoration: none;
    transition: color 0.15s;
    line-height: 1.4;
    border-left: 2px solid transparent;
    padding-left: 10px;
    margin-left: -1px;
}
.toc-link:hover { color: var(--text-primary); }
.toc-link.toc-h3 { padding-left: 22px; font-size: 12px; }
.toc-link.active {
    color: var(--accent); font-weight: 600;
    border-left-color: var(--accent);
}

/* ═══════════════════════════════════════
   CONTENT TYPOGRAPHY
   ═══════════════════════════════════════ */
.doc-content h1 {
    font-family: var(--font-sans); font-size: 28px; font-weight: 800;
    letter-spacing: -0.7px; line-height: 1.2;
    margin-bottom: 8px; color: var(--text-primary);
}
.doc-content h2 {
    font-family: var(--font-sans); font-size: 21px; font-weight: 700;
    letter-spacing: -0.3px; line-height: 1.3;
    margin-top: 48px; margin-bottom: 16px;
    padding-top: 24px; border-top: 1px solid var(--border-subtle);
    color: var(--text-primary);
}
.doc-content h2:first-of-type { margin-top: 32px; border-top: none; padding-top: 0; }

.doc-content h3 {
    font-family: var(--font-sans); font-size: 17px; font-weight: 700;
    margin-top: 32px; margin-bottom: 12px;
    color: var(--text-primary);
}
.doc-content h4 {
    font-family: var(--font-sans); font-size: 15px; font-weight: 700;
    margin-top: 24px; margin-bottom: 8px;
    color: var(--text-secondary);
}

.heading-anchor {
    color: var(--accent); text-decoration: none;
    opacity: 0; font-weight: 400; margin-left: 6px;
    transition: opacity 0.15s;
}
h2:hover .heading-anchor,
h3:hover .heading-anchor,
h4:hover .heading-anchor { opacity: 0.5; }
.heading-anchor:hover { opacity: 1 !important; }

.doc-content p {
    font-size: 15px; line-height: 1.7;
    color: var(--text-secondary); margin-bottom: 16px;
}
.doc-content strong { color: var(--text-primary); font-weight: 600; }

.doc-content a {
    color: var(--accent); text-decoration: none;
    border-bottom: 1px solid rgba(194, 65, 12, 0.2);
    transition: border-color 0.15s;
}
.doc-content a:hover { border-bottom-color: var(--accent); }

.doc-content ul, .doc-content ol {
    margin-bottom: 16px; padding-left: 24px;
}
.doc-content li {
    font-size: 15px; line-height: 1.7;
    color: var(--text-secondary); margin-bottom: 6px;
}
.doc-content li strong { color: var(--text-primary); }

/* Inline code */
.doc-content code {
    font-family: var(--font-mono); font-size: 13px; font-weight: 500;
    color: var(--accent); background: var(--accent-dim);
    padding: 2px 6px; border-radius: 4px;
    border: 1px solid rgba(194, 65, 12, 0.08);
}

/* Code blocks */
.code-block {
    position: relative; margin-bottom: 20px;
    background: #1e1e2e; border-radius: var(--radius-md);
    border: 1px solid #2a2a3e;
    overflow: hidden;
}
.code-block .code-lang {
    position: absolute; top: 0; right: 0;
    font-family: var(--font-mono); font-size: 10px; font-weight: 600;
    text-transform: uppercase; letter-spacing: 0.5px;
    color: #8888aa; background: rgba(255,255,255,0.05);
    padding: 4px 12px; border-radius: 0 var(--radius-md) 0 6px;
}
.code-block pre {
    margin: 0; padding: 20px 24px; overflow-x: auto;
    scrollbar-width: thin; scrollbar-color: #444 transparent;
}
.code-block pre::-webkit-scrollbar { height: 4px; }
.code-block pre::-webkit-scrollbar-thumb { background: #555; border-radius: 2px; }
.code-block pre code {
    font-family: var(--font-mono); font-size: 13px; line-height: 1.6;
    color: #cdd6f4; background: none; padding: 0; border: none; border-radius: 0;
}

/* Tables */
.table-wrapper {
    margin-bottom: 20px; overflow-x: auto;
    border: 1px solid var(--border); border-radius: var(--radius-md);
    scrollbar-width: thin;
}
.table-wrapper table {
    width: 100%; border-collapse: collapse;
    font-size: 14px;
}
.table-wrapper th {
    font-family: var(--font-sans); font-size: 12px; font-weight: 700;
    text-transform: uppercase; letter-spacing: 0.4px;
    color: var(--text-muted); background: var(--bg-elevated);
    text-align: left; padding: 10px 16px;
    border-bottom: 1px solid var(--border);
}
.table-wrapper td {
    font-family: var(--font-sans); font-size: 14px; line-height: 1.5;
    color: var(--text-secondary); padding: 10px 16px;
    border-bottom: 1px solid var(--border-subtle);
    vertical-align: top;
}
.table-wrapper tr:last-child td { border-bottom: none; }
.table-wrapper tr:hover td { background: var(--bg-elevated); }
.table-wrapper td code {
    font-size: 12px;
}

/* Blockquotes / Callouts */
.callout {
    margin-bottom: 20px; padding: 16px 20px;
    border-left: 3px solid var(--border);
    border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
    background: var(--bg-elevated);
}
.callout p { margin-bottom: 8px; font-size: 14px; }
.callout p:last-child { margin-bottom: 0; }
.callout em { color: var(--text-muted); }

.callout-warning {
    border-left-color: var(--warning);
    background: var(--warning-dim);
}
.callout-tip {
    border-left-color: var(--success);
    background: var(--success-dim);
}
.callout-info {
    border-left-color: var(--info);
    background: var(--info-dim);
}
.callout-danger {
    border-left-color: var(--error);
    background: var(--error-dim);
}

/* HR */
.doc-content hr {
    border: none; height: 1px;
    background: var(--border); margin: 32px 0;
}

/* ─── VERSION BADGE ─── */
.doc-meta {
    display: flex; align-items: center; gap: 12px;
    margin-bottom: 24px;
}
.doc-meta-badge {
    font-family: var(--font-mono); font-size: 11px; font-weight: 600;
    color: var(--text-muted); background: var(--bg-elevated);
    padding: 3px 10px; border-radius: 4px;
    border: 1px solid var(--border-subtle);
}

/* ─── PREV / NEXT NAV ─── */
.prev-next {
    display: flex; gap: 16px; margin-top: 48px;
    padding-top: 24px; border-top: 1px solid var(--border);
}
.prev-next-link {
    flex: 1; display: block; padding: 16px 20px;
    background: var(--bg-primary); border: 1px solid var(--border);
    border-radius: var(--radius-md); text-decoration: none;
    transition: all 0.15s;
}
.prev-next-link:hover {
    border-color: var(--accent); background: var(--accent-dim);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(194, 65, 12, 0.06);
}
.prev-next-link.next { text-align: right; }
.prev-next-label {
    font-family: var(--font-sans); font-size: 12px; font-weight: 600;
    color: var(--text-muted); display: block; margin-bottom: 4px;
}
.prev-next-title {
    font-family: var(--font-sans); font-size: 15px; font-weight: 700;
    color: var(--text-primary);
}
.prev-next-link:hover .prev-next-title { color: var(--accent); }

/* ─── MOBILE MENU ─── */
.mobile-menu-toggle {
    display: none; align-items: center; justify-content: center;
    width: 36px; height: 36px; border: 1px solid var(--border);
    border-radius: var(--radius-sm); background: var(--bg-primary);
    cursor: pointer; color: var(--text-secondary);
}

/* ═══════════════════════════════════════
   RESPONSIVE
   ═══════════════════════════════════════ */
@media (max-width: 1200px) {
    .page-toc { display: none; }
    .docs-main { margin-right: 0; }
}

@media (max-width: 860px) {
    .mobile-menu-toggle { display: flex; }
    .docs-sidebar {
        transform: translateX(-100%);
        transition: transform 0.25s ease;
        z-index: 50;
        box-shadow: none;
    }
    .docs-sidebar.open {
        transform: translateX(0);
        box-shadow: 8px 0 30px rgba(0,0,0,0.1);
    }
    .docs-main {
        margin-left: 0; padding: 28px 20px 60px;
    }
    .doc-content h1 { font-size: 24px; }
    .doc-content h2 { font-size: 19px; }
    .prev-next { flex-direction: column; }
}

/* ═══════════════════════════════════════
   PRISM THEME OVERRIDES (dark code blocks)
   ═══════════════════════════════════════ */
.code-block .token.comment,
.code-block .token.prolog,
.code-block .token.doctype { color: #6c7086; }
.code-block .token.punctuation { color: #a6adc8; }
.code-block .token.property,
.code-block .token.tag,
.code-block .token.boolean,
.code-block .token.number { color: #fab387; }
.code-block .token.string,
.code-block .token.attr-value { color: #a6e3a1; }
.code-block .token.selector,
.code-block .token.attr-name,
.code-block .token.builtin { color: #89b4fa; }
.code-block .token.keyword { color: #cba6f7; }
.code-block .token.function { color: #89b4fa; }
.code-block .token.operator { color: #89dceb; }
.code-block .token.class-name { color: #f9e2af; }
.code-block .token.decorator { color: #f38ba8; }
</style>
</head>
<body>

<!-- TOP BAR -->
<div class="topbar">
    <div class="topbar-left">
        <a href="home.html" class="logo">
            <div class="logo-hex"><div class="logo-hex-inner"></div></div>
            Hive<span>Board</span>
        </a>
        <span class="docs-badge">Docs</span>
    </div>
    <div class="topbar-right">
        <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle navigation">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none"><path d="M3 5h12M3 9h12M3 13h12" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/></svg>
        </button>
        <a href="https://github.com/hiveboard/hiveloop" class="topbar-link" target="_blank" rel="noopener">GitHub</a>
        <a href="home.html" class="topbar-link primary">Open Dashboard</a>
    </div>
</div>

<!-- LAYOUT -->
<div class="docs-layout">
    <!-- SIDEBAR -->
    <nav class="docs-sidebar" id="docsSidebar">
<div class="docs-nav-section">Getting Started</div>
<a class="docs-nav-item active" href="user-manual.html"><span class="docs-nav-icon"><svg viewBox="0 0 18 18" fill="none"><path d="M2 3.5A1.5 1.5 0 013.5 2H7a2 2 0 012 2v12.5l-.5-.5-3-3H3.5A1.5 1.5 0 012 11.5v-8z" stroke="currentColor" stroke-width="1.3"/><path d="M16 3.5A1.5 1.5 0 0014.5 2H11a2 2 0 00-2 2v12.5l.5-.5 3-3h2A1.5 1.5 0 0016 11.5v-8z" stroke="currentColor" stroke-width="1.3"/></svg></span><span>SDK Manual</span></a>
<a class="docs-nav-item" href="integration-guide.html"><span class="docs-nav-icon"><svg viewBox="0 0 18 18" fill="none"><path d="M6 2v4M12 2v4M4 6h10v3a5 5 0 01-5 5 5 5 0 01-5-5V6zM9 14v3" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/></svg></span><span>Integration Guide</span></a>
<div class="docs-nav-section">Dashboard</div>
<a class="docs-nav-item" href="docs-dashboard-guide.html"><span class="docs-nav-icon"><svg viewBox="0 0 18 18" fill="none"><rect x="2" y="2" width="14" height="14" rx="2" stroke="currentColor" stroke-width="1.3"/><path d="M2 7h14M7 7v9" stroke="currentColor" stroke-width="1.3"/></svg></span><span>Dashboard Guide</span></a>
<div class="docs-nav-section">Instrumentation</div>
<a class="docs-nav-item" href="docs-instrumentation-guide.html"><span class="docs-nav-icon"><svg viewBox="0 0 18 18" fill="none"><circle cx="9" cy="9" r="7" stroke="currentColor" stroke-width="1.3"/><circle cx="9" cy="9" r="4" stroke="currentColor" stroke-width="1.3"/><circle cx="9" cy="9" r="1" fill="currentColor"/></svg></span><span>Instrumentation</span></a>
<a class="docs-nav-item" href="docs-layer1-guide.html"><span class="docs-nav-icon"><svg viewBox="0 0 18 18" fill="none"><path d="M9 2L2 6l7 4 7-4-7-4zM2 12l7 4 7-4M2 9l7 4 7-4" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/></svg></span><span>Layer 1 Guide</span></a>
<div class="docs-nav-section">Rich Events</div>
<a class="docs-nav-item" href="docs-layer2-rich-events.html"><span class="docs-nav-icon"><svg viewBox="0 0 18 18" fill="none"><path d="M10 2L3 10h5l-1 6 7-8h-5l1-6z" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/></svg></span><span>Rich Events</span></a>
<a class="docs-nav-item" href="docs-layer2-llm-tracking.html"><span class="docs-nav-icon"><svg viewBox="0 0 18 18" fill="none"><rect x="4" y="4" width="10" height="10" rx="1.5" stroke="currentColor" stroke-width="1.3"/><rect x="7" y="7" width="4" height="4" rx="0.5" stroke="currentColor" stroke-width="1.3"/><path d="M7 2v2M11 2v2M7 14v2M11 14v2M2 7h2M2 11h2M14 7h2M14 11h2" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"/></svg></span><span>LLM Tracking</span></a>
<a class="docs-nav-item" href="docs-operational-events.html"><span class="docs-nav-icon"><svg viewBox="0 0 18 18" fill="none"><path d="M16 9h-3l-2 7L7 2 5 9H2" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/></svg></span><span>Operational Events</span></a>
<a class="docs-nav-item" href="docs-track-context.html"><span class="docs-nav-icon"><svg viewBox="0 0 18 18" fill="none"><circle cx="5" cy="5" r="2" stroke="currentColor" stroke-width="1.3"/><circle cx="13" cy="5" r="2" stroke="currentColor" stroke-width="1.3"/><circle cx="5" cy="13" r="2" stroke="currentColor" stroke-width="1.3"/><path d="M5 7v4M13 7c0 3-2 4-8 4" stroke="currentColor" stroke-width="1.3"/></svg></span><span>Track Context</span></a>

    </nav>

    <!-- MAIN CONTENT -->
    <main class="docs-main">
        <div class="doc-meta">
            <span class="doc-meta-badge">v0.1.0</span>
            <span class="doc-meta-badge">Updated Feb 2026</span>
        </div>
        <article class="doc-content">
<h1 id="hiveloop-user-manual">HiveLoop — User Manual <a class="heading-anchor" href="#hiveloop-user-manual" aria-label="Link to this section">#</a></h1>
<p><strong>Version:</strong> 0.1.0
<strong>Last updated:</strong> 2026-02-12</p>
<blockquote class="callout"><p><em>Add observability to any AI agent in 3 lines. See everything on HiveBoard.</em></p></blockquote>
<hr />
<h2 id="table-of-contents">Table of Contents <a class="heading-anchor" href="#table-of-contents" aria-label="Link to this section">#</a></h2>
<ol>
<li><a href="#1-what-is-hiveloop">What is HiveLoop</a></li>
<li><a href="#2-quick-start">Quick Start</a></li>
<li><a href="#3-core-concepts">Core Concepts</a></li>
<li><a href="#4-layer-0--init--heartbeat">Layer 0 — Init + Heartbeat</a></li>
<li><a href="#5-layer-1--decorators--task-context">Layer 1 — Decorators + Task Context</a></li>
<li><a href="#6-layer-2--rich-events">Layer 2 — Rich Events</a></li>
<li><a href="#7-integration-patterns">Integration Patterns</a></li>
<li><a href="#8-plumbing-patterns">Plumbing Patterns</a></li>
<li><a href="#9-configuration-reference">Configuration Reference</a></li>
<li><a href="#10-api-reference">API Reference</a></li>
<li><a href="#11-troubleshooting">Troubleshooting</a></li>
</ol>
<hr />
<h2 id="1-what-is-hiveloop">1. What is HiveLoop <a class="heading-anchor" href="#1-what-is-hiveloop" aria-label="Link to this section">#</a></h2>
<p>HiveLoop is a lightweight Python SDK that makes AI agents observable. You add it to your agent's code, and it streams telemetry to <a href="https://hiveboard.io" target="_blank" rel="noopener">HiveBoard</a> — a real-time dashboard that shows what your agents are doing, why they failed, how long they took, and how much they cost.</p>
<p><strong>HiveLoop is not a framework.</strong> It doesn't change how your agent works. It watches what your agent does and reports it. Your agent's logic stays exactly the same.</p>
<p><strong>The model:</strong> HiveLoop is the instrument. HiveBoard is the dashboard. Think Sentry SDK → Sentry Dashboard.</p>
<div class="code-block"><pre><code>Your Agent Code
    ↓ (add decorators + events)
HiveLoop SDK
    ↓ (batched HTTP)
HiveBoard Server
    ↓ (real-time)
Dashboard + Alerts
</code></pre></div>
<h3 id="what-you-get">What you get <a class="heading-anchor" href="#what-you-get" aria-label="Link to this section">#</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
  <th>Layer</th>
  <th>Effort</th>
  <th>What you see on HiveBoard</th>
</tr>
</thead>
<tbody>
<tr>
  <td>Layer 0</td>
  <td>3 lines</td>
  <td>Agent appears with live heartbeat, stuck detection, online/offline status</td>
</tr>
<tr>
  <td>Layer 1</td>
  <td>Add decorators</td>
  <td>Task timelines with action tracking, duration, success/failure</td>
</tr>
<tr>
  <td>Layer 2</td>
  <td>Sprinkle events</td>
  <td>LLM costs, plans, escalations, approvals, retries — the full narrative</td>
</tr>
</tbody>
</table></div>
<p>Each layer is independent. Start with Layer 0, stop whenever you have enough visibility.</p>
<hr />
<h2 id="2-quick-start">2. Quick Start <a class="heading-anchor" href="#2-quick-start" aria-label="Link to this section">#</a></h2>
<h3 id="install">Install <a class="heading-anchor" href="#install" aria-label="Link to this section">#</a></h3>
<div class="code-block"><span class="code-lang">bash</span><pre><code class="language-bash">pip install hiveloop
</code></pre></div>
<h3 id="3-lines-to-first-heartbeat">3 lines to first heartbeat <a class="heading-anchor" href="#3-lines-to-first-heartbeat" aria-label="Link to this section">#</a></h3>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">import hiveloop

hb = hiveloop.init(api_key=&quot;hb_live_your_key_here&quot;)
agent = hb.agent(&quot;my-agent&quot;, type=&quot;general&quot;)
</code></pre></div>
<p>That's it. Your agent now appears on the HiveBoard dashboard with a live heartbeat. If it stops, HiveBoard notices within 5 minutes and marks it as stuck.</p>
<h3 id="add-task-tracking-5-more-lines">Add task tracking (5 more lines) <a class="heading-anchor" href="#add-task-tracking-5-more-lines" aria-label="Link to this section">#</a></h3>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">with agent.task(&quot;task-123&quot;, project=&quot;my-project&quot;, type=&quot;processing&quot;) as task:
    result = do_work()

    task.llm_call(&quot;reasoning&quot;, model=&quot;claude-sonnet-4-20250514&quot;,
                  tokens_in=1500, tokens_out=200, cost=0.003)
</code></pre></div>
<p>Now you have a task timeline with LLM cost tracking in the Cost Explorer.</p>
<hr />
<h2 id="3-core-concepts">3. Core Concepts <a class="heading-anchor" href="#3-core-concepts" aria-label="Link to this section">#</a></h2>
<h3 id="31-the-hierarchy">3.1 The hierarchy <a class="heading-anchor" href="#31-the-hierarchy" aria-label="Link to this section">#</a></h3>
<div class="code-block"><pre><code>HiveBoard Instance (your account)
  └── Agent (a running process — &quot;lead-qualifier&quot;, &quot;support-triage&quot;)
        └── Task (a unit of work — &quot;process lead #4801&quot;, &quot;triage ticket #1002&quot;)
              └── Action (a step within a task — &quot;score_lead&quot;, &quot;call_llm&quot;, &quot;send_email&quot;)
                    └── Event (a specific moment — LLM call, plan step, escalation)
</code></pre></div>
<h3 id="32-agents">3.2 Agents <a class="heading-anchor" href="#32-agents" aria-label="Link to this section">#</a></h3>
<p>An agent is anything that runs autonomously and does work. It could be a LangChain agent, a CrewAI crew member, a custom Python loop, or a cron job with LLM calls. HiveLoop doesn't care about the implementation — it tracks the agent as a named entity with a heartbeat.</p>
<p><strong>Key properties:</strong></p>
<ul>
<li><code>agent_id</code> — unique name (e.g. <code>&quot;lead-qualifier&quot;</code>, <code>&quot;support-bot&quot;</code>)</li>
<li><code>type</code> — classification (e.g. <code>&quot;sales&quot;</code>, <code>&quot;support&quot;</code>, <code>&quot;etl&quot;</code>)</li>
<li>Heartbeat — automatic background ping every N seconds</li>
<li>Status — derived by HiveBoard from the heartbeat and recent events</li>
</ul>
<p><strong>Agent status (derived by HiveBoard, not set by you):</strong></p>
<div class="table-wrapper"><table>
<thead>
<tr>
  <th>Status</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td><code>idle</code></td>
  <td>Agent is alive (heartbeat active) but not processing a task</td>
</tr>
<tr>
  <td><code>processing</code></td>
  <td>Agent is actively working on a task</td>
</tr>
<tr>
  <td><code>waiting_approval</code></td>
  <td>Agent has requested human approval</td>
</tr>
<tr>
  <td><code>error</code></td>
  <td>Last task failed</td>
</tr>
<tr>
  <td><code>stuck</code></td>
  <td>No heartbeat received within the stuck threshold</td>
</tr>
</tbody>
</table></div>
<h3 id="33-tasks">3.3 Tasks <a class="heading-anchor" href="#33-tasks" aria-label="Link to this section">#</a></h3>
<p>A task is a unit of work an agent performs. It has a start, an end, and a result (completed or failed). Tasks contain actions and events that form a timeline — the step-by-step narrative of what happened.</p>
<p><strong>Examples of tasks:</strong></p>
<ul>
<li>Processing a sales lead</li>
<li>Triaging a support ticket</li>
<li>Running an ETL batch</li>
<li>Generating a report</li>
<li>Responding to a user query</li>
</ul>
<h3 id="34-actions">3.4 Actions <a class="heading-anchor" href="#34-actions" aria-label="Link to this section">#</a></h3>
<p>An action is a tracked function call within a task. When you decorate a function with <code>@agent.track()</code>, every call automatically emits <code>action_started</code> and <code>action_completed</code> (or <code>action_failed</code>) events with timing data. Actions can nest — an action inside another action creates a parent-child relationship in the timeline.</p>
<h3 id="35-events">3.5 Events <a class="heading-anchor" href="#35-events" aria-label="Link to this section">#</a></h3>
<p>Events are the atomic data points. Everything in HiveBoard is derived from events: status, timelines, metrics, costs, alerts. There are 13 event types:</p>
<div class="table-wrapper"><table>
<thead>
<tr>
  <th>Type</th>
  <th>Emitted by</th>
  <th>When</th>
</tr>
</thead>
<tbody>
<tr>
  <td><code>agent_registered</code></td>
  <td><code>hb.agent()</code></td>
  <td>Agent first registers</td>
</tr>
<tr>
  <td><code>heartbeat</code></td>
  <td>Automatic</td>
  <td>Every heartbeat interval</td>
</tr>
<tr>
  <td><code>task_started</code></td>
  <td><code>agent.task()</code></td>
  <td>Task context entered</td>
</tr>
<tr>
  <td><code>task_completed</code></td>
  <td><code>agent.task()</code></td>
  <td>Task context exited cleanly</td>
</tr>
<tr>
  <td><code>task_failed</code></td>
  <td><code>agent.task()</code></td>
  <td>Exception inside task context</td>
</tr>
<tr>
  <td><code>action_started</code></td>
  <td><code>@agent.track()</code></td>
  <td>Decorated function called</td>
</tr>
<tr>
  <td><code>action_completed</code></td>
  <td><code>@agent.track()</code></td>
  <td>Decorated function returned</td>
</tr>
<tr>
  <td><code>action_failed</code></td>
  <td><code>@agent.track()</code></td>
  <td>Decorated function raised</td>
</tr>
<tr>
  <td><code>escalated</code></td>
  <td><code>task.escalate()</code></td>
  <td>Manual escalation</td>
</tr>
<tr>
  <td><code>approval_requested</code></td>
  <td><code>task.request_approval()</code></td>
  <td>Awaiting human decision</td>
</tr>
<tr>
  <td><code>approval_received</code></td>
  <td><code>task.approval_received()</code></td>
  <td>Human decision received</td>
</tr>
<tr>
  <td><code>retry_started</code></td>
  <td><code>task.retry()</code></td>
  <td>Retrying after failure</td>
</tr>
<tr>
  <td><code>custom</code></td>
  <td><code>task.event()</code> / convenience methods</td>
  <td>Anything else (LLM calls, plans, issues, etc.)</td>
</tr>
</tbody>
</table></div>
<hr />
<h2 id="4-layer-0-init-heartbeat">4. Layer 0 — Init + Heartbeat <a class="heading-anchor" href="#4-layer-0-init-heartbeat" aria-label="Link to this section">#</a></h2>
<h3 id="41-initialize">4.1 Initialize <a class="heading-anchor" href="#41-initialize" aria-label="Link to this section">#</a></h3>
<p>Call <code>hiveloop.init()</code> once at your application's startup — wherever your agent process begins.</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">import hiveloop

hb = hiveloop.init(
    api_key=&quot;hb_live_your_key_here&quot;,
    endpoint=&quot;http://localhost:8000&quot;,   # default: https://api.hiveboard.io
    environment=&quot;production&quot;,            # appears as a filter on the dashboard
    group=&quot;my-team&quot;,                     # organizational grouping
)
</code></pre></div>
<p><code>hiveloop.init()</code> is a singleton — calling it twice returns the same instance and logs a warning. To reinitialize (e.g. in tests), call <code>hiveloop.reset()</code> first.</p>
<p><strong>What happens on init:</strong></p>
<ol>
<li>API key format validated</li>
<li>Internal event queue created (thread-safe)</li>
<li>Background flush thread started (daemon thread)</li>
<li>No HTTP call is made — first server contact happens on the first flush</li>
</ol>
<h3 id="42-register-an-agent">4.2 Register an agent <a class="heading-anchor" href="#42-register-an-agent" aria-label="Link to this section">#</a></h3>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">agent = hb.agent(
    &quot;my-agent&quot;,
    type=&quot;general&quot;,
    version=&quot;1.2.0&quot;,
    heartbeat_interval=30,     # seconds between heartbeats (default: 30)
    stuck_threshold=300,       # seconds before HiveBoard marks agent as stuck (default: 300)
)
</code></pre></div>
<p><strong>What happens on registration:</strong></p>
<ol>
<li><code>agent_registered</code> event emitted</li>
<li>Background heartbeat thread started (daemon, automatic)</li>
<li>Agent appears on the HiveBoard dashboard within seconds</li>
</ol>
<p><strong><code>hb.agent()</code> is idempotent</strong> — calling it twice with the same <code>agent_id</code> returns the same agent handle. This is safe and expected for dynamic agent creation.</p>
<h3 id="43-multiple-agents">4.3 Multiple agents <a class="heading-anchor" href="#43-multiple-agents" aria-label="Link to this section">#</a></h3>
<p>Register as many agents as you need. Each gets its own heartbeat thread:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">sales_agent = hb.agent(&quot;lead-qualifier&quot;, type=&quot;sales&quot;)
support_agent = hb.agent(&quot;support-triage&quot;, type=&quot;support&quot;)
etl_agent = hb.agent(&quot;data-pipeline&quot;, type=&quot;etl&quot;)
</code></pre></div>
<p>For dynamic agent creation (agents created at runtime), call <code>hb.agent()</code> at the moment each agent is created. There is no explicit &quot;unregister&quot; — when an agent stops, its heartbeat stops, and HiveBoard marks it as stuck/offline after <code>stuck_threshold</code> seconds.</p>
<h3 id="44-heartbeat-enrichment">4.4 Heartbeat enrichment <a class="heading-anchor" href="#44-heartbeat-enrichment" aria-label="Link to this section">#</a></h3>
<p>Add custom data to each heartbeat for richer dashboard cards:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">agent = hb.agent(
    &quot;my-agent&quot;,
    type=&quot;general&quot;,
    heartbeat_payload=lambda: {
        &quot;kind&quot;: &quot;heartbeat_status&quot;,
        &quot;summary&quot;: f&quot;Queue depth: {get_queue_size()}&quot;,
        &quot;data&quot;: {
            &quot;queue_depth&quot;: get_queue_size(),
            &quot;memory_mb&quot;: get_memory_usage(),
            &quot;uptime_seconds&quot;: get_uptime(),
        },
    },
)
</code></pre></div>
<h3 id="45-queue-visibility">4.5 Queue visibility <a class="heading-anchor" href="#45-queue-visibility" aria-label="Link to this section">#</a></h3>
<p>If your agent processes a work queue, provide a queue provider callback:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">agent = hb.agent(
    &quot;my-agent&quot;,
    type=&quot;general&quot;,
    queue_provider=lambda: {
        &quot;depth&quot;: work_queue.qsize(),
        &quot;oldest_age_seconds&quot;: get_oldest_item_age(),
        &quot;items&quot;: [
            {&quot;id&quot;: item.id, &quot;priority&quot;: item.priority, &quot;summary&quot;: item.summary}
            for item in list(work_queue.queue)[:10]
        ],
    },
)
</code></pre></div>
<p>The queue snapshot is sent with each heartbeat and displayed in the Pipeline view on the dashboard.</p>
<h3 id="46-shutdown">4.6 Shutdown <a class="heading-anchor" href="#46-shutdown" aria-label="Link to this section">#</a></h3>
<p>When your process exits, flush remaining events:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">hiveloop.shutdown(timeout=10)  # waits up to 10 seconds for pending events to send
</code></pre></div>
<p>HiveLoop also registers an <code>atexit</code> handler automatically, but explicit shutdown is recommended for reliable event delivery.</p>
<hr />
<h2 id="5-layer-1-decorators-task-context">5. Layer 1 — Decorators + Task Context <a class="heading-anchor" href="#5-layer-1-decorators-task-context" aria-label="Link to this section">#</a></h2>
<h3 id="51-task-context-manager">5.1 Task context manager <a class="heading-anchor" href="#51-task-context-manager" aria-label="Link to this section">#</a></h3>
<p>Wrap a unit of work in <code>agent.task()</code> to track it as a task:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">with agent.task(&quot;task-123&quot;, project=&quot;my-project&quot;, type=&quot;lead_processing&quot;) as task:
    # Everything inside this block is part of the task
    result = process_lead(lead)
</code></pre></div>
<p><strong>Automatic behavior:</strong></p>
<ul>
<li><code>task_started</code> event emitted on entry</li>
<li><code>task_completed</code> event emitted on clean exit</li>
<li><code>task_failed</code> event emitted if an exception propagates out</li>
<li>The exception is <strong>never swallowed</strong> — it re-raises after being recorded</li>
<li>Duration is tracked automatically</li>
</ul>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>task_id</code> (required) — unique identifier for this task</li>
<li><code>project</code> (optional) — which project this task belongs to</li>
<li><code>type</code> (optional) — task classification (e.g. <code>&quot;lead_processing&quot;</code>, <code>&quot;ticket_triage&quot;</code>)</li>
</ul>
<h3 id="52-non-context-manager-task-api">5.2 Non-context-manager task API <a class="heading-anchor" href="#52-non-context-manager-task-api" aria-label="Link to this section">#</a></h3>
<p>For situations where context managers don't fit (e.g. callback-driven architectures):</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">task = agent.start_task(&quot;task-123&quot;, project=&quot;my-project&quot;, type=&quot;processing&quot;)

try:
    result = do_work()
    task.complete(payload={&quot;result&quot;: result})
except Exception as e:
    task.fail(exception=e)
    raise
</code></pre></div>
<h3 id="53-decorators">5.3 Decorators <a class="heading-anchor" href="#53-decorators" aria-label="Link to this section">#</a></h3>
<p>Track function calls as actions within a task:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">@agent.track(&quot;score_lead&quot;)
def score_lead(lead_data):
    # HiveLoop automatically captures:
    # - action_started (with function name)
    # - action_completed (with duration) or action_failed (with exception)
    return calculate_score(lead_data)
</code></pre></div>
<p>Works with both sync and async functions:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">@agent.track(&quot;fetch_data&quot;)
async def fetch_data(url):
    async with httpx.AsyncClient() as client:
        return await client.get(url)
</code></pre></div>
<h3 id="54-nested-actions">5.4 Nested actions <a class="heading-anchor" href="#54-nested-actions" aria-label="Link to this section">#</a></h3>
<p>Actions called inside other actions nest automatically:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">@agent.track(&quot;process_lead&quot;)
def process_lead(lead):
    score = score_lead(lead)       # nested action
    enrichment = enrich_lead(lead)  # nested action
    route_lead(lead, score)         # nested action

@agent.track(&quot;score_lead&quot;)
def score_lead(lead):
    return llm_score(lead)

@agent.track(&quot;enrich_lead&quot;)
def enrich_lead(lead):
    return api_enrich(lead)

@agent.track(&quot;route_lead&quot;)
def route_lead(lead, score):
    return assign_to_rep(lead, score)
</code></pre></div>
<p>The timeline shows:</p>
<div class="code-block"><pre><code>process_lead (3.2s)
  ├── score_lead (1.1s)
  ├── enrich_lead (0.8s)
  └── route_lead (1.3s)
</code></pre></div>
<h3 id="55-exception-handling">5.5 Exception handling <a class="heading-anchor" href="#55-exception-handling" aria-label="Link to this section">#</a></h3>
<p><strong>HiveLoop never swallows exceptions.</strong> If your function raises, the exception propagates normally. HiveLoop records the failure and re-raises:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">@agent.track(&quot;risky_operation&quot;)
def risky():
    raise ValueError(&quot;something broke&quot;)

try:
    risky()  # action_failed event emitted, then ValueError re-raises
except ValueError:
    handle_error()
</code></pre></div>
<hr />
<h2 id="6-layer-2-rich-events">6. Layer 2 — Rich Events <a class="heading-anchor" href="#6-layer-2-rich-events" aria-label="Link to this section">#</a></h2>
<p>Layer 2 is where the timeline goes from &quot;function X ran for 4.8 seconds&quot; to &quot;lead scored 42 against threshold 80, used claude-sonnet at $0.003, and was escalated for review.&quot; These are manual event calls — typically 5-15 across your entire codebase.</p>
<h3 id="61-llm-call-tracking">6.1 LLM call tracking <a class="heading-anchor" href="#61-llm-call-tracking" aria-label="Link to this section">#</a></h3>
<p>The single most valuable Layer 2 event. Powers the Cost Explorer.</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">task.llm_call(
    &quot;lead_scoring&quot;,                          # call name
    &quot;claude-sonnet-4-20250514&quot;,              # model
    tokens_in=1500,                          # input tokens (optional)
    tokens_out=200,                          # output tokens (optional)
    cost=0.003,                              # USD cost (optional)
    duration_ms=1200,                        # LLM latency (optional)
    prompt_preview=&quot;You are analyzing...&quot;,   # first ~500 chars (optional)
    response_preview='{&quot;score&quot;: 42}',        # first ~500 chars (optional)
)
</code></pre></div>
<p><strong>All fields except name and model are optional.</strong> Start by logging just the call name and model — add token counts and cost later. This enables incremental instrumentation.</p>
<p>For LLM calls outside a task context (e.g. agent-level summarization):</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">agent.llm_call(&quot;summarize_context&quot;, &quot;claude-haiku-4-5-20251001&quot;,
               tokens_in=3000, tokens_out=500, cost=0.001)
</code></pre></div>
<p><strong>Cost calculation helper</strong> (if your LLM client doesn't return cost):</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">MODEL_COSTS = {
    &quot;claude-sonnet-4-20250514&quot;: (0.003, 0.015),       # per 1K tokens (in, out)
    &quot;claude-haiku-4-5-20251001&quot;: (0.00025, 0.00125),
    &quot;gpt-4o&quot;: (0.005, 0.015),
    &quot;gpt-4o-mini&quot;: (0.00015, 0.0006),
}

def calculate_cost(model, tokens_in, tokens_out):
    costs = MODEL_COSTS.get(model, (0.001, 0.005))
    return round((tokens_in / 1000) * costs[0] + (tokens_out / 1000) * costs[1], 6)
</code></pre></div>
<h3 id="62-plans">6.2 Plans <a class="heading-anchor" href="#62-plans" aria-label="Link to this section">#</a></h3>
<p>When your agent creates a plan or sequence of steps:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">task.plan(&quot;Process lead #4801&quot;, [&quot;Score lead&quot;, &quot;Enrich data&quot;, &quot;Route to rep&quot;])
</code></pre></div>
<p>As each step progresses:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">task.plan_step(0, &quot;started&quot;, &quot;Scoring lead&quot;)
# ... work happens ...
task.plan_step(0, &quot;completed&quot;, &quot;Lead scored 87&quot;, turns=1, tokens=2500)

task.plan_step(1, &quot;started&quot;, &quot;Enriching lead data&quot;)
# ... work happens ...
task.plan_step(1, &quot;failed&quot;, &quot;Enrichment API timeout&quot;)
# ... retry ...
task.plan_step(1, &quot;completed&quot;, &quot;Enrichment succeeded on retry&quot;)
</code></pre></div>
<p>Plan progress is displayed as a progress bar on the dashboard timeline.</p>
<h3 id="63-escalations">6.3 Escalations <a class="heading-anchor" href="#63-escalations" aria-label="Link to this section">#</a></h3>
<p>When your agent escalates to a human or another system:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">task.escalate(
    &quot;Complex billing issue — needs senior review&quot;,
    assigned_to=&quot;senior-support&quot;,
)
</code></pre></div>
<h3 id="64-approvals">6.4 Approvals <a class="heading-anchor" href="#64-approvals" aria-label="Link to this section">#</a></h3>
<p>When your agent needs human approval:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">task.request_approval(
    &quot;Approval needed for account credit of $500&quot;,
    approver=&quot;support-lead&quot;,
)
</code></pre></div>
<p>When the approval comes back:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">task.approval_received(
    &quot;Credit approved&quot;,
    approved_by=&quot;support-lead&quot;,
    decision=&quot;approved&quot;,    # or &quot;rejected&quot;
)
</code></pre></div>
<h3 id="65-retries">6.5 Retries <a class="heading-anchor" href="#65-retries" aria-label="Link to this section">#</a></h3>
<p>When your agent retries after a failure:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">task.retry(&quot;Retrying after API timeout&quot;, attempt=2, backoff_seconds=4.0)
</code></pre></div>
<h3 id="66-issues">6.6 Issues <a class="heading-anchor" href="#66-issues" aria-label="Link to this section">#</a></h3>
<p>Agent-level problems (not tied to a specific task):</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">agent.report_issue(
    summary=&quot;CRM API consistently timing out&quot;,
    severity=&quot;high&quot;,               # &quot;low&quot;, &quot;medium&quot;, &quot;high&quot;, &quot;critical&quot;
    issue_id=&quot;crm-timeout&quot;,        # optional — for dedup and resolution tracking
    category=&quot;connectivity&quot;,       # optional
    context={&quot;api&quot;: &quot;salesforce&quot;, &quot;timeout_ms&quot;: 5000},  # optional
)
</code></pre></div>
<p>When the issue resolves:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">agent.resolve_issue(&quot;CRM API recovered&quot;, issue_id=&quot;crm-timeout&quot;)
</code></pre></div>
<h3 id="67-todos">6.7 TODOs <a class="heading-anchor" href="#67-todos" aria-label="Link to this section">#</a></h3>
<p>Agent-managed work items:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">agent.todo(&quot;todo-kb-update&quot;, &quot;created&quot;,
           &quot;Update knowledge base with new product FAQ&quot;,
           priority=&quot;normal&quot;, source=&quot;agent_decision&quot;)
</code></pre></div>
<h3 id="68-scheduled-work">6.8 Scheduled work <a class="heading-anchor" href="#68-scheduled-work" aria-label="Link to this section">#</a></h3>
<p>Report recurring/scheduled tasks:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">agent.scheduled(items=[
    {&quot;id&quot;: &quot;sched-sync&quot;, &quot;name&quot;: &quot;CRM Pipeline Sync&quot;,
     &quot;next_run&quot;: &quot;2026-02-12T15:00:00Z&quot;, &quot;interval&quot;: &quot;1h&quot;,
     &quot;enabled&quot;: True, &quot;last_status&quot;: &quot;success&quot;},
    {&quot;id&quot;: &quot;sched-cleanup&quot;, &quot;name&quot;: &quot;Stale data cleanup&quot;,
     &quot;next_run&quot;: &quot;2026-02-13T08:00:00Z&quot;, &quot;interval&quot;: &quot;daily&quot;,
     &quot;enabled&quot;: True, &quot;last_status&quot;: None},
])
</code></pre></div>
<h3 id="69-custom-events">6.9 Custom events <a class="heading-anchor" href="#69-custom-events" aria-label="Link to this section">#</a></h3>
<p>For anything that doesn't fit the above:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">task.event(&quot;custom_event_type&quot;, {
    &quot;kind&quot;: &quot;my_custom_kind&quot;,
    &quot;summary&quot;: &quot;Something interesting happened&quot;,
    &quot;data&quot;: {&quot;key&quot;: &quot;value&quot;},
})
</code></pre></div>
<hr />
<h2 id="7-integration-patterns">7. Integration Patterns <a class="heading-anchor" href="#7-integration-patterns" aria-label="Link to this section">#</a></h2>
<h3 id="71-single-long-running-agent">7.1 Single long-running agent <a class="heading-anchor" href="#71-single-long-running-agent" aria-label="Link to this section">#</a></h3>
<p>The simplest pattern. One process, one agent, tasks processed sequentially.</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">import hiveloop

hb = hiveloop.init(api_key=&quot;hb_live_xxx&quot;)
agent = hb.agent(&quot;my-agent&quot;, type=&quot;processor&quot;)

while True:
    item = queue.get()

    with agent.task(item.id, project=&quot;my-project&quot;, type=&quot;processing&quot;) as task:
        result = process(item)
        task.llm_call(&quot;analyze&quot;, model=&quot;...&quot;, tokens_in=N, tokens_out=N, cost=X)

    time.sleep(1)
</code></pre></div>
<h3 id="72-multiple-static-agents">7.2 Multiple static agents <a class="heading-anchor" href="#72-multiple-static-agents" aria-label="Link to this section">#</a></h3>
<p>Fixed number of agents, each in its own thread or process.</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">hb = hiveloop.init(api_key=&quot;hb_live_xxx&quot;)

sales_agent = hb.agent(&quot;lead-qualifier&quot;, type=&quot;sales&quot;)
support_agent = hb.agent(&quot;support-triage&quot;, type=&quot;support&quot;)
etl_agent = hb.agent(&quot;data-pipeline&quot;, type=&quot;etl&quot;)

# Each agent runs in its own thread
threading.Thread(target=run_sales, args=(sales_agent,), daemon=True).start()
threading.Thread(target=run_support, args=(support_agent,), daemon=True).start()
threading.Thread(target=run_etl, args=(etl_agent,), daemon=True).start()
</code></pre></div>
<h3 id="73-dynamic-agent-creation">7.3 Dynamic agent creation <a class="heading-anchor" href="#73-dynamic-agent-creation" aria-label="Link to this section">#</a></h3>
<p>Agents are created and destroyed at runtime (e.g. multi-tenant platforms, on-demand workers).</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">hb = hiveloop.init(api_key=&quot;hb_live_xxx&quot;)

# Agent registry
_agents: dict[str, hiveloop.Agent] = {}

def create_agent(agent_id: str, agent_type: str):
    &quot;&quot;&quot;Called whenever your system creates a new agent.&quot;&quot;&quot;
    _agents[agent_id] = hb.agent(agent_id, type=agent_type)
    return _agents[agent_id]

def get_agent(agent_id: str):
    return _agents.get(agent_id)

def remove_agent(agent_id: str):
    &quot;&quot;&quot;Called when an agent is removed. Heartbeat stops → HiveBoard shows offline.&quot;&quot;&quot;
    _agents.pop(agent_id, None)
    # No explicit unregister — heartbeat stops, HiveBoard notices
</code></pre></div>
<h3 id="74-api-driven-agents-fastapi-flask">7.4 API-driven agents (FastAPI / Flask) <a class="heading-anchor" href="#74-api-driven-agents-fastapi-flask" aria-label="Link to this section">#</a></h3>
<p>Agent work is triggered by HTTP requests.</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python"># startup
hb = hiveloop.init(api_key=&quot;hb_live_xxx&quot;)
agent = hb.agent(&quot;api-agent&quot;, type=&quot;api&quot;)

@app.post(&quot;/process&quot;)
async def process_request(request: ProcessRequest):
    with agent.task(request.id, project=&quot;api-service&quot;, type=&quot;request&quot;) as task:
        result = await handle(request)
        return result
</code></pre></div>
<h3 id="75-queue-driven-agents">7.5 Queue-driven agents <a class="heading-anchor" href="#75-queue-driven-agents" aria-label="Link to this section">#</a></h3>
<p>Agent processes items from a message queue.</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">hb = hiveloop.init(api_key=&quot;hb_live_xxx&quot;)
agent = hb.agent(&quot;queue-worker&quot;, type=&quot;worker&quot;,
    queue_provider=lambda: {&quot;depth&quot;: queue.qsize()},
)

def worker():
    while True:
        message = queue.get()

        with agent.task(message.id, project=&quot;queue-service&quot;, type=message.type) as task:
            process(message)

        queue.task_done()
</code></pre></div>
<h3 id="76-framework-callbacks-langchain-crewai-autogen">7.6 Framework callbacks (LangChain, CrewAI, AutoGen) <a class="heading-anchor" href="#76-framework-callbacks-langchain-crewai-autogen" aria-label="Link to this section">#</a></h3>
<p>For established frameworks, HiveLoop provides callback integrations that plug into the framework's native hook system. These map framework events to HiveLoop events automatically.</p>
<p><strong>LangChain:</strong></p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">from hiveloop.integrations.langchain import LangChainCallback

hb = hiveloop.init(api_key=&quot;hb_live_xxx&quot;)
callback = LangChainCallback(hb, project=&quot;my-project&quot;)
agent = initialize_agent(tools, llm, callbacks=[callback])
</code></pre></div>
<p><strong>CrewAI:</strong></p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">from hiveloop.integrations.crewai import CrewAICallback

hb = hiveloop.init(api_key=&quot;hb_live_xxx&quot;)
callback = CrewAICallback(hb, project=&quot;my-project&quot;)
crew = Crew(agents=[...], callbacks=[callback])
</code></pre></div>
<p><strong>AutoGen:</strong></p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">from hiveloop.integrations.autogen import AutoGenCallback

hb = hiveloop.init(api_key=&quot;hb_live_xxx&quot;)
callback = AutoGenCallback(hb, project=&quot;my-project&quot;)
</code></pre></div>
<blockquote class="callout callout-info"><p><strong>Note:</strong> Framework integrations are planned for a future release. For now, use the core SDK directly with decorators and manual events.</p></blockquote>
<hr />
<h2 id="8-plumbing-patterns">8. Plumbing Patterns <a class="heading-anchor" href="#8-plumbing-patterns" aria-label="Link to this section">#</a></h2>
<p>The most common integration challenge: the <code>task</code> object is created at one level (where work begins) but needed at a deeper level (where LLM calls happen). Here are three patterns to solve this.</p>
<h3 id="81-pass-as-parameter-simplest">8.1 Pass as parameter (simplest) <a class="heading-anchor" href="#81-pass-as-parameter-simplest" aria-label="Link to this section">#</a></h3>
<p>Thread the task object through your function calls:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">with agent.task(task_id, project=&quot;my-project&quot;) as task:
    result = process(item, task=task)

def process(item, task=None):
    score = score_item(item, task=task)
    if task:
        task.llm_call(&quot;scoring&quot;, model=&quot;...&quot;, tokens_in=N, tokens_out=N)
    return score
</code></pre></div>
<p><strong>Best for:</strong> Small codebases, shallow call stacks.</p>
<h3 id="82-context-variables-recommended">8.2 Context variables (recommended) <a class="heading-anchor" href="#82-context-variables-recommended" aria-label="Link to this section">#</a></h3>
<p>Use Python's <code>contextvars</code> for implicit task propagation. This is thread-safe and async-safe.</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">import contextvars

_current_task = contextvars.ContextVar('hiveloop_task', default=None)

def set_current_task(task):
    _current_task.set(task)

def get_current_task():
    return _current_task.get()
</code></pre></div>
<p>At the top level:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">with agent.task(task_id, project=&quot;my-project&quot;) as task:
    set_current_task(task)
    try:
        result = process(item)
    finally:
        set_current_task(None)
</code></pre></div>
<p>Anywhere deeper in the code:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python">def deep_function():
    task = get_current_task()
    if task:
        task.llm_call(&quot;reasoning&quot;, model=&quot;...&quot;, tokens_in=N, tokens_out=N)
</code></pre></div>
<p><strong>Best for:</strong> Large codebases, deep call stacks, async code.</p>
<h3 id="83-store-on-execution-context">8.3 Store on execution context <a class="heading-anchor" href="#83-store-on-execution-context" aria-label="Link to this section">#</a></h3>
<p>If your framework has an execution context or request object that flows through the call stack, attach the task to it:</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python"># FastAPI example
@app.post(&quot;/process&quot;)
async def process(request: Request):
    with agent.task(task_id, project=&quot;my-project&quot;) as task:
        request.state.hiveloop_task = task
        result = await handle(request)

# Deeper in the code
def handle(request):
    task = getattr(request.state, 'hiveloop_task', None)
    if task:
        task.llm_call(...)
</code></pre></div>
<p><strong>Best for:</strong> Web frameworks, middleware-based architectures.</p>
<h3 id="84-graceful-degradation">8.4 Graceful degradation <a class="heading-anchor" href="#84-graceful-degradation" aria-label="Link to this section">#</a></h3>
<p>All patterns above use <code>if task:</code> guards. This is deliberate — HiveLoop should never break your agent. If HiveLoop isn't initialized (e.g. in tests, or if the server is down), everything still works. The SDK never raises transport errors.</p>
<div class="code-block"><span class="code-lang">python</span><pre><code class="language-python"># This is always safe:
task = get_current_task()
if task:
    task.llm_call(...)
# If task is None, nothing happens. Your agent keeps running.
</code></pre></div>
<hr />
<h2 id="9-configuration-reference">9. Configuration Reference <a class="heading-anchor" href="#9-configuration-reference" aria-label="Link to this section">#</a></h2>
<h3 id="91-hiveloopinit-parameters">9.1 <code>hiveloop.init()</code> parameters <a class="heading-anchor" href="#91-hiveloopinit-parameters" aria-label="Link to this section">#</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
  <th>Parameter</th>
  <th>Type</th>
  <th>Default</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><code>api_key</code></td>
  <td>str</td>
  <td><strong>required</strong></td>
  <td>API key. Must start with <code>hb_</code>.</td>
</tr>
<tr>
  <td><code>endpoint</code></td>
  <td>str</td>
  <td><code>&quot;https://api.hiveboard.io&quot;</code></td>
  <td>HiveBoard server URL. Override for self-hosted or local dev.</td>
</tr>
<tr>
  <td><code>environment</code></td>
  <td>str</td>
  <td><code>&quot;production&quot;</code></td>
  <td>Operational context (e.g. <code>&quot;production&quot;</code>, <code>&quot;staging&quot;</code>). Filterable on dashboard.</td>
</tr>
<tr>
  <td><code>group</code></td>
  <td>str</td>
  <td><code>&quot;default&quot;</code></td>
  <td>Organizational label (e.g. <code>&quot;team-alpha&quot;</code>, <code>&quot;region-us&quot;</code>). Filterable on dashboard.</td>
</tr>
<tr>
  <td><code>flush_interval</code></td>
  <td>float</td>
  <td><code>5.0</code></td>
  <td>Seconds between automatic batch flushes.</td>
</tr>
<tr>
  <td><code>batch_size</code></td>
  <td>int</td>
  <td><code>100</code></td>
  <td>Max events per HTTP request. Server caps at 500.</td>
</tr>
<tr>
  <td><code>max_queue_size</code></td>
  <td>int</td>
  <td><code>10000</code></td>
  <td>Max events buffered in memory. Oldest dropped when full.</td>
</tr>
<tr>
  <td><code>debug</code></td>
  <td>bool</td>
  <td><code>False</code></td>
  <td>Logs SDK operations to stderr.</td>
</tr>
</tbody>
</table></div>
<h3 id="92-hbagent-parameters">9.2 <code>hb.agent()</code> parameters <a class="heading-anchor" href="#92-hbagent-parameters" aria-label="Link to this section">#</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
  <th>Parameter</th>
  <th>Type</th>
  <th>Default</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><code>agent_id</code></td>
  <td>str</td>
  <td><strong>required</strong></td>
  <td>Unique agent identifier. Max 256 chars. Human-readable slug recommended.</td>
</tr>
<tr>
  <td><code>type</code></td>
  <td>str</td>
  <td><code>&quot;general&quot;</code></td>
  <td>Agent classification. Displayed on dashboard cards.</td>
</tr>
<tr>
  <td><code>version</code></td>
  <td>str</td>
  <td><code>None</code></td>
  <td>Agent version. Useful for comparing performance across deploys.</td>
</tr>
<tr>
  <td><code>framework</code></td>
  <td>str</td>
  <td><code>&quot;custom&quot;</code></td>
  <td>Framework identifier: <code>&quot;langchain&quot;</code>, <code>&quot;crewai&quot;</code>, <code>&quot;autogen&quot;</code>, <code>&quot;custom&quot;</code>.</td>
</tr>
<tr>
  <td><code>heartbeat_interval</code></td>
  <td>int</td>
  <td><code>30</code></td>
  <td>Seconds between automatic heartbeats. Set to <code>0</code> to disable.</td>
</tr>
<tr>
  <td><code>stuck_threshold</code></td>
  <td>int</td>
  <td><code>300</code></td>
  <td>Seconds without heartbeat before HiveBoard marks agent as stuck.</td>
</tr>
<tr>
  <td><code>heartbeat_payload</code></td>
  <td>Callable</td>
  <td><code>None</code></td>
  <td>Callback returning dict to include in each heartbeat event.</td>
</tr>
<tr>
  <td><code>queue_provider</code></td>
  <td>Callable</td>
  <td><code>None</code></td>
  <td>Callback returning queue state dict, sent with each heartbeat.</td>
</tr>
</tbody>
</table></div>
<h3 id="93-agenttask-parameters">9.3 <code>agent.task()</code> parameters <a class="heading-anchor" href="#93-agenttask-parameters" aria-label="Link to this section">#</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
  <th>Parameter</th>
  <th>Type</th>
  <th>Default</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><code>task_id</code></td>
  <td>str</td>
  <td><strong>required</strong></td>
  <td>Unique task identifier.</td>
</tr>
<tr>
  <td><code>project</code></td>
  <td>str</td>
  <td><code>None</code></td>
  <td>Project this task belongs to. Must exist on the server.</td>
</tr>
<tr>
  <td><code>type</code></td>
  <td>str</td>
  <td><code>None</code></td>
  <td>Task type classification.</td>
</tr>
</tbody>
</table></div>
<h3 id="94-api-key-types">9.4 API key types <a class="heading-anchor" href="#94-api-key-types" aria-label="Link to this section">#</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
  <th>Prefix</th>
  <th>Type</th>
  <th>Permissions</th>
</tr>
</thead>
<tbody>
<tr>
  <td><code>hb_live_</code></td>
  <td>Live</td>
  <td>Full read/write. Used in production.</td>
</tr>
<tr>
  <td><code>hb_test_</code></td>
  <td>Test</td>
  <td>Read/write, but data is isolated from live data.</td>
</tr>
<tr>
  <td><code>hb_read_</code></td>
  <td>Read-only</td>
  <td>Query only. Cannot ingest events.</td>
</tr>
</tbody>
</table></div>
<hr />
<h2 id="10-api-reference">10. API Reference <a class="heading-anchor" href="#10-api-reference" aria-label="Link to this section">#</a></h2>
<h3 id="101-module-level-functions">10.1 Module-level functions <a class="heading-anchor" href="#101-module-level-functions" aria-label="Link to this section">#</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
  <th>Function</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><code>hiveloop.init(**kwargs)</code></td>
  <td>Initialize the SDK. Returns <code>HiveBoard</code> client instance. Singleton.</td>
</tr>
<tr>
  <td><code>hiveloop.shutdown(timeout=10)</code></td>
  <td>Flush remaining events and stop all threads.</td>
</tr>
<tr>
  <td><code>hiveloop.reset()</code></td>
  <td>Flush, stop threads, clear singleton. For testing.</td>
</tr>
<tr>
  <td><code>hiveloop.flush()</code></td>
  <td>Immediately flush buffered events without shutting down.</td>
</tr>
</tbody>
</table></div>
<h3 id="102-hiveboard-client-hb">10.2 <code>HiveBoard</code> client (<code>hb</code>) <a class="heading-anchor" href="#102-hiveboard-client-hb" aria-label="Link to this section">#</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
  <th>Method</th>
  <th>Returns</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><code>hb.agent(agent_id, **kwargs)</code></td>
  <td><code>Agent</code></td>
  <td>Register an agent. Idempotent — same ID returns same instance.</td>
</tr>
</tbody>
</table></div>
<h3 id="103-agent">10.3 <code>Agent</code> <a class="heading-anchor" href="#103-agent" aria-label="Link to this section">#</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
  <th>Method</th>
  <th>Returns</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><code>agent.task(task_id, **kwargs)</code></td>
  <td><code>Task</code> (context manager)</td>
  <td>Start a tracked task.</td>
</tr>
<tr>
  <td><code>agent.start_task(task_id, **kwargs)</code></td>
  <td><code>Task</code></td>
  <td>Start a task without context manager. Call <code>.complete()</code> or <code>.fail()</code> manually.</td>
</tr>
<tr>
  <td><code>agent.track(action_name)</code></td>
  <td>decorator</td>
  <td>Decorator that tracks function calls as actions.</td>
</tr>
<tr>
  <td><code>agent.track_context(action_name)</code></td>
  <td>context manager</td>
  <td>Context manager version of track.</td>
</tr>
<tr>
  <td><code>agent.event(event_type, payload)</code></td>
  <td><code>None</code></td>
  <td>Emit an agent-level custom event (no task context).</td>
</tr>
<tr>
  <td><code>agent.llm_call(name, model, **kwargs)</code></td>
  <td><code>None</code></td>
  <td>Log an LLM call outside a task context.</td>
</tr>
<tr>
  <td><code>agent.queue_snapshot(**kwargs)</code></td>
  <td><code>None</code></td>
  <td>Explicitly report queue state.</td>
</tr>
<tr>
  <td><code>agent.todo(todo_id, action, summary, **kwargs)</code></td>
  <td><code>None</code></td>
  <td>Report a TODO item lifecycle event.</td>
</tr>
<tr>
  <td><code>agent.scheduled(items=[...])</code></td>
  <td><code>None</code></td>
  <td>Report scheduled/recurring work.</td>
</tr>
<tr>
  <td><code>agent.report_issue(summary, **kwargs)</code></td>
  <td><code>None</code></td>
  <td>Report an agent-level issue.</td>
</tr>
<tr>
  <td><code>agent.resolve_issue(summary, **kwargs)</code></td>
  <td><code>None</code></td>
  <td>Resolve a previously reported issue.</td>
</tr>
</tbody>
</table></div>
<h3 id="104-task">10.4 <code>Task</code> <a class="heading-anchor" href="#104-task" aria-label="Link to this section">#</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
  <th>Method</th>
  <th>Returns</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><code>task.event(event_type, payload)</code></td>
  <td><code>None</code></td>
  <td>Emit a custom event within this task.</td>
</tr>
<tr>
  <td><code>task.llm_call(name, model, **kwargs)</code></td>
  <td><code>None</code></td>
  <td>Log an LLM call within this task.</td>
</tr>
<tr>
  <td><code>task.plan(goal, steps)</code></td>
  <td><code>None</code></td>
  <td>Declare a plan with a goal and step names.</td>
</tr>
<tr>
  <td><code>task.plan_step(index, status, summary, **kwargs)</code></td>
  <td><code>None</code></td>
  <td>Update a plan step's status.</td>
</tr>
<tr>
  <td><code>task.escalate(reason, **kwargs)</code></td>
  <td><code>None</code></td>
  <td>Escalate this task.</td>
</tr>
<tr>
  <td><code>task.request_approval(reason, **kwargs)</code></td>
  <td><code>None</code></td>
  <td>Request human approval.</td>
</tr>
<tr>
  <td><code>task.approval_received(summary, **kwargs)</code></td>
  <td><code>None</code></td>
  <td>Record approval decision.</td>
</tr>
<tr>
  <td><code>task.retry(reason, **kwargs)</code></td>
  <td><code>None</code></td>
  <td>Record a retry attempt.</td>
</tr>
<tr>
  <td><code>task.complete(**kwargs)</code></td>
  <td><code>None</code></td>
  <td>Manually complete task (non-context-manager API).</td>
</tr>
<tr>
  <td><code>task.fail(**kwargs)</code></td>
  <td><code>None</code></td>
  <td>Manually fail task (non-context-manager API).</td>
</tr>
<tr>
  <td><code>task.set_payload(payload)</code></td>
  <td><code>None</code></td>
  <td>Add payload to the task's completion event.</td>
</tr>
</tbody>
</table></div>
<hr />
<h2 id="11-troubleshooting">11. Troubleshooting <a class="heading-anchor" href="#11-troubleshooting" aria-label="Link to this section">#</a></h2>
<h3 id="events-not-appearing-on-dashboard">Events not appearing on dashboard <a class="heading-anchor" href="#events-not-appearing-on-dashboard" aria-label="Link to this section">#</a></h3>
<ol>
<li><strong>Check the API key</strong> — must start with <code>hb_live_</code> or <code>hb_test_</code></li>
<li><strong>Check the endpoint</strong> — default is <code>https://api.hiveboard.io</code>, override for local dev</li>
<li><strong>Enable debug mode</strong> — <code>hiveloop.init(..., debug=True)</code> logs all SDK operations to stderr</li>
<li><strong>Call flush</strong> — <code>hiveloop.flush()</code> forces immediate send, bypassing the batch timer</li>
<li><strong>Check server logs</strong> — look for 401 (auth), 400 (validation), or 207 (partial rejection)</li>
</ol>
<h3 id="401-unauthorized">401 Unauthorized <a class="heading-anchor" href="#401-unauthorized" aria-label="Link to this section">#</a></h3>
<p>The API key doesn't match what the server has. Common causes:</p>
<ul>
<li>Environment variable not set (on Windows PowerShell: <code>$env:HIVEBOARD_DEV_KEY = &quot;...&quot;</code>, not <code>set</code>)</li>
<li>Key is for test data but server expects live (or vice versa)</li>
</ul>
<h3 id="events-partially-rejected-207">Events partially rejected (207) <a class="heading-anchor" href="#events-partially-rejected-207" aria-label="Link to this section">#</a></h3>
<p>Some events accepted, some rejected. Check the response for per-event errors:</p>
<ul>
<li><code>invalid_project_id</code> — project doesn't exist on the server. Create it first via <code>POST /v1/projects</code></li>
<li><code>payload_too_large</code> — payload exceeds 32KB limit. Truncate previews</li>
<li><code>invalid_event_type</code> — unrecognized event type string</li>
</ul>
<h3 id="agent-shows-as-quotstuckquot-even-though-its-running">Agent shows as &quot;stuck&quot; even though it's running <a class="heading-anchor" href="#agent-shows-as-quotstuckquot-even-though-its-running" aria-label="Link to this section">#</a></h3>
<p>Heartbeat isn't reaching the server. Check:</p>
<ul>
<li>Network connectivity to the HiveBoard endpoint</li>
<li><code>heartbeat_interval</code> isn't set to <code>0</code> (which disables heartbeats)</li>
<li>The SDK's background flush thread is running (<code>debug=True</code> will show flush activity)</li>
</ul>
<h3 id="import-errors">Import errors <a class="heading-anchor" href="#import-errors" aria-label="Link to this section">#</a></h3>
<ul>
<li><code>ModuleNotFoundError: No module named 'hiveloop'</code> — run <code>pip install -e C:\path\to\hiveboard\src\sdk</code></li>
<li>If using a virtual environment, make sure HiveLoop is installed in the same environment your agent uses</li>
</ul>
<h3 id="performance">Performance <a class="heading-anchor" href="#performance" aria-label="Link to this section">#</a></h3>
<p>HiveLoop is designed to add zero overhead to your agent:</p>
<ul>
<li>Events are queued in memory (never blocks your code)</li>
<li>Flushed in a background daemon thread</li>
<li>Transport errors are caught and logged (never raised to your code)</li>
<li>If the queue fills up (<code>max_queue_size</code>), oldest events are silently dropped</li>
<li>If the server is unreachable, events are retried with exponential backoff (1s, 2s, 4s, 8s, 16s, max 60s)</li>
<li>400 errors (client bugs) are not retried — events are dropped to avoid infinite loops</li>
</ul>
<hr />
<h2 id="appendix-a-dashboard-mapping">Appendix A: Dashboard Mapping <a class="heading-anchor" href="#appendix-a-dashboard-mapping" aria-label="Link to this section">#</a></h2>
<p>Where each HiveLoop call appears on the HiveBoard dashboard:</p>
<div class="table-wrapper"><table>
<thead>
<tr>
  <th>HiveLoop Call</th>
  <th>Dashboard Location</th>
</tr>
</thead>
<tbody>
<tr>
  <td><code>hb.agent()</code></td>
  <td>Agent card in the Hive (left sidebar)</td>
</tr>
<tr>
  <td>Heartbeat (automatic)</td>
  <td>Heartbeat indicator on agent card</td>
</tr>
<tr>
  <td><code>agent.task()</code></td>
  <td>Task list in Mission Control (center panel)</td>
</tr>
<tr>
  <td><code>@agent.track()</code></td>
  <td>Action nodes in Task Timeline</td>
</tr>
<tr>
  <td><code>task.llm_call()</code></td>
  <td>Cost Explorer + LLM call detail in Timeline</td>
</tr>
<tr>
  <td><code>task.plan()</code> / <code>plan_step()</code></td>
  <td>Plan progress bar in Timeline</td>
</tr>
<tr>
  <td><code>task.escalate()</code></td>
  <td>Activity Stream + Timeline node</td>
</tr>
<tr>
  <td><code>task.request_approval()</code></td>
  <td>Activity Stream + agent status → &quot;waiting_approval&quot;</td>
</tr>
<tr>
  <td><code>task.approval_received()</code></td>
  <td>Activity Stream + Timeline node</td>
</tr>
<tr>
  <td><code>task.retry()</code></td>
  <td>Timeline branch (retry sequence)</td>
</tr>
<tr>
  <td><code>agent.report_issue()</code></td>
  <td>Pipeline view → Issues section</td>
</tr>
<tr>
  <td><code>agent.resolve_issue()</code></td>
  <td>Pipeline view → Issue resolved</td>
</tr>
<tr>
  <td><code>agent.todo()</code></td>
  <td>Pipeline view → TODOs section</td>
</tr>
<tr>
  <td><code>agent.scheduled()</code></td>
  <td>Pipeline view → Scheduled section</td>
</tr>
<tr>
  <td><code>agent.queue_snapshot()</code></td>
  <td>Pipeline view → Queue section + agent card enrichment</td>
</tr>
</tbody>
</table></div>
<hr />
<h2 id="appendix-b-what-hiveloop-does-not-do">Appendix B: What HiveLoop Does NOT Do <a class="heading-anchor" href="#appendix-b-what-hiveloop-does-not-do" aria-label="Link to this section">#</a></h2>
<ul>
<li><strong>Does not change your agent's behavior.</strong> HiveLoop is read-only observation.</li>
<li><strong>Does not require any specific framework.</strong> Works with LangChain, CrewAI, AutoGen, or plain Python.</li>
<li><strong>Does not make network calls on your code's thread.</strong> All I/O happens in a background thread.</li>
<li><strong>Does not raise exceptions from transport errors.</strong> Network failures are logged, never propagated.</li>
<li><strong>Does not store data locally.</strong> Events are buffered in memory and shipped to HiveBoard. No local database.</li>
<li><strong>Does not require schema migration when you add more instrumentation.</strong> The event schema is the same at every layer — only the populated fields change.</li>
</ul>

        </article>
        <div class="prev-next"><div></div><a class="prev-next-link next" href="integration-guide.html"><span class="prev-next-label">Next →</span><span class="prev-next-title">Integration Guide</span></a></div>
    </main>

    <!-- RIGHT TOC -->
<nav class="page-toc"><div class="page-toc-title">On this page</div>
<a class="toc-link" href="#table-of-contents">Table of Contents</a>
<a class="toc-link" href="#1-what-is-hiveloop">1. What is HiveLoop</a>
<a class="toc-link toc-h3" href="#what-you-get">What you get</a>
<a class="toc-link" href="#2-quick-start">2. Quick Start</a>
<a class="toc-link toc-h3" href="#install">Install</a>
<a class="toc-link toc-h3" href="#3-lines-to-first-heartbeat">3 lines to first heartbeat</a>
<a class="toc-link toc-h3" href="#add-task-tracking-5-more-lines">Add task tracking (5 more lines)</a>
<a class="toc-link" href="#3-core-concepts">3. Core Concepts</a>
<a class="toc-link toc-h3" href="#31-the-hierarchy">3.1 The hierarchy</a>
<a class="toc-link toc-h3" href="#32-agents">3.2 Agents</a>
<a class="toc-link toc-h3" href="#33-tasks">3.3 Tasks</a>
<a class="toc-link toc-h3" href="#34-actions">3.4 Actions</a>
<a class="toc-link toc-h3" href="#35-events">3.5 Events</a>
<a class="toc-link" href="#4-layer-0-init-heartbeat">4. Layer 0 — Init + Heartbeat</a>
<a class="toc-link toc-h3" href="#41-initialize">4.1 Initialize</a>
<a class="toc-link toc-h3" href="#42-register-an-agent">4.2 Register an agent</a>
<a class="toc-link toc-h3" href="#43-multiple-agents">4.3 Multiple agents</a>
<a class="toc-link toc-h3" href="#44-heartbeat-enrichment">4.4 Heartbeat enrichment</a>
<a class="toc-link toc-h3" href="#45-queue-visibility">4.5 Queue visibility</a>
<a class="toc-link toc-h3" href="#46-shutdown">4.6 Shutdown</a>
<a class="toc-link" href="#5-layer-1-decorators-task-context">5. Layer 1 — Decorators + Task Context</a>
<a class="toc-link toc-h3" href="#51-task-context-manager">5.1 Task context manager</a>
<a class="toc-link toc-h3" href="#52-non-context-manager-task-api">5.2 Non-context-manager task API</a>
<a class="toc-link toc-h3" href="#53-decorators">5.3 Decorators</a>
<a class="toc-link toc-h3" href="#54-nested-actions">5.4 Nested actions</a>
<a class="toc-link toc-h3" href="#55-exception-handling">5.5 Exception handling</a>
<a class="toc-link" href="#6-layer-2-rich-events">6. Layer 2 — Rich Events</a>
<a class="toc-link toc-h3" href="#61-llm-call-tracking">6.1 LLM call tracking</a>
<a class="toc-link toc-h3" href="#62-plans">6.2 Plans</a>
<a class="toc-link toc-h3" href="#63-escalations">6.3 Escalations</a>
<a class="toc-link toc-h3" href="#64-approvals">6.4 Approvals</a>
<a class="toc-link toc-h3" href="#65-retries">6.5 Retries</a>
<a class="toc-link toc-h3" href="#66-issues">6.6 Issues</a>
<a class="toc-link toc-h3" href="#67-todos">6.7 TODOs</a>
<a class="toc-link toc-h3" href="#68-scheduled-work">6.8 Scheduled work</a>
<a class="toc-link toc-h3" href="#69-custom-events">6.9 Custom events</a>
<a class="toc-link" href="#7-integration-patterns">7. Integration Patterns</a>
<a class="toc-link toc-h3" href="#71-single-long-running-agent">7.1 Single long-running agent</a>
<a class="toc-link toc-h3" href="#72-multiple-static-agents">7.2 Multiple static agents</a>
<a class="toc-link toc-h3" href="#73-dynamic-agent-creation">7.3 Dynamic agent creation</a>
<a class="toc-link toc-h3" href="#74-api-driven-agents-fastapi-flask">7.4 API-driven agents (FastAPI / Flask)</a>
<a class="toc-link toc-h3" href="#75-queue-driven-agents">7.5 Queue-driven agents</a>
<a class="toc-link toc-h3" href="#76-framework-callbacks-langchain-crewai-autogen">7.6 Framework callbacks (LangChain, CrewAI, AutoGen)</a>
<a class="toc-link" href="#8-plumbing-patterns">8. Plumbing Patterns</a>
<a class="toc-link toc-h3" href="#81-pass-as-parameter-simplest">8.1 Pass as parameter (simplest)</a>
<a class="toc-link toc-h3" href="#82-context-variables-recommended">8.2 Context variables (recommended)</a>
<a class="toc-link toc-h3" href="#83-store-on-execution-context">8.3 Store on execution context</a>
<a class="toc-link toc-h3" href="#84-graceful-degradation">8.4 Graceful degradation</a>
<a class="toc-link" href="#9-configuration-reference">9. Configuration Reference</a>
<a class="toc-link toc-h3" href="#91-hiveloopinit-parameters">9.1 hiveloop.init() parameters</a>
<a class="toc-link toc-h3" href="#92-hbagent-parameters">9.2 hb.agent() parameters</a>
<a class="toc-link toc-h3" href="#93-agenttask-parameters">9.3 agent.task() parameters</a>
<a class="toc-link toc-h3" href="#94-api-key-types">9.4 API key types</a>
<a class="toc-link" href="#10-api-reference">10. API Reference</a>
<a class="toc-link toc-h3" href="#101-module-level-functions">10.1 Module-level functions</a>
<a class="toc-link toc-h3" href="#102-hiveboard-client-hb">10.2 HiveBoard client (hb)</a>
<a class="toc-link toc-h3" href="#103-agent">10.3 Agent</a>
<a class="toc-link toc-h3" href="#104-task">10.4 Task</a>
<a class="toc-link" href="#11-troubleshooting">11. Troubleshooting</a>
<a class="toc-link toc-h3" href="#events-not-appearing-on-dashboard">Events not appearing on dashboard</a>
<a class="toc-link toc-h3" href="#401-unauthorized">401 Unauthorized</a>
<a class="toc-link toc-h3" href="#events-partially-rejected-207">Events partially rejected (207)</a>
<a class="toc-link toc-h3" href="#agent-shows-as-stuck-even-though-its-running">Agent shows as "stuck" even though it's running</a>
<a class="toc-link toc-h3" href="#import-errors">Import errors</a>
<a class="toc-link toc-h3" href="#performance">Performance</a>
<a class="toc-link" href="#appendix-a-dashboard-mapping">Appendix A: Dashboard Mapping</a>
<a class="toc-link" href="#appendix-b-what-hiveloop-does-not-do">Appendix B: What HiveLoop Does NOT Do</a>
</nav>

</div>

<!-- SCRIPTS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-yaml.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-toml.min.js"></script>
<script>
// Re-highlight after load
Prism.highlightAll();

// Mobile menu toggle
document.getElementById('mobileMenuToggle')?.addEventListener('click', () => {
    document.getElementById('docsSidebar').classList.toggle('open');
});

// Close sidebar on content click (mobile)
document.querySelector('.docs-main')?.addEventListener('click', () => {
    document.getElementById('docsSidebar').classList.remove('open');
});

// Active TOC tracking
(function() {
    const tocLinks = document.querySelectorAll('.toc-link');
    if (!tocLinks.length) return;
    
    const headings = [];
    tocLinks.forEach(link => {
        const id = link.getAttribute('href')?.slice(1);
        const el = id && document.getElementById(id);
        if (el) headings.push({ el, link });
    });
    
    function updateActive() {
        let current = headings[0];
        for (const h of headings) {
            if (h.el.getBoundingClientRect().top <= 100) current = h;
        }
        tocLinks.forEach(l => l.classList.remove('active'));
        if (current) current.link.classList.add('active');
    }
    
    window.addEventListener('scroll', updateActive, { passive: true });
    updateActive();
})();

// Smooth scrolling for anchor links
document.querySelectorAll('a[href^="#"]').forEach(a => {
    a.addEventListener('click', e => {
        const target = document.querySelector(a.getAttribute('href'));
        if (target) {
            e.preventDefault();
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            history.pushState(null, '', a.getAttribute('href'));
        }
    });
});
</script>
</body>
</html>
