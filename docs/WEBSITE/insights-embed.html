<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HiveBoard â€” Insights</title>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600;700&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HiveBoard Insights â€” Standalone Page
   Reuses design tokens from hiveboard.css
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

:root {
    --idle: #94a3b8;
    --active: #2563eb;
    --success: #16a34a;
    --warning: #d97706;
    --error: #dc2626;
    --stuck: #b91c1c;
    --llm: #7c3aed;

    --bg-deep: #f5f3ef;
    --bg-primary: #ffffff;
    --bg-card: #ffffff;
    --bg-elevated: #fafaf8;
    --bg-hover: #f0eeea;

    --border: #e2e0db;
    --border-subtle: #eceae5;

    --text-primary: #1a1a1a;
    --text-secondary: #4a4a4a;
    --text-muted: #8a8a8a;

    --accent: #c2410c;
    --accent-dim: rgba(194, 65, 12, 0.06);
    --accent-hover: rgba(194, 65, 12, 0.1);

    --font-mono: 'IBM Plex Mono', monospace;
    --font-sans: 'Plus Jakarta Sans', sans-serif;

    --radius-sm: 6px;
    --radius-md: 10px;
    --radius-lg: 14px;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: var(--font-sans);
    background: var(--bg-deep);
    color: var(--text-primary);
    height: 100vh;
    overflow: hidden;
    -webkit-font-smoothing: antialiased;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOP BAR â€” replicated from main dashboard
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.topbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 24px;
    height: 56px;
    background: var(--bg-primary);
    border-bottom: 1px solid var(--border);
    flex-shrink: 0;
}

.topbar-left { display: flex; align-items: center; gap: 16px; }

.logo {
    display: flex; align-items: center; gap: 10px;
    font-family: var(--font-sans); font-weight: 800; font-size: 17px;
    letter-spacing: -0.5px; color: var(--text-primary);
    text-decoration: none;
}
.logo span { color: var(--accent); }

.logo-hex {
    width: 28px; height: 28px; background: var(--accent);
    clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
    display: flex; align-items: center; justify-content: center; flex-shrink: 0;
}
.logo-hex-inner {
    width: 18px; height: 18px; background: var(--bg-primary);
    clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
}

.workspace-badge {
    font-family: var(--font-mono); font-size: 12px; color: var(--text-muted);
    background: var(--bg-deep); padding: 4px 12px; border-radius: 20px; border: 1px solid var(--border);
}

.view-tabs { display: flex; gap: 4px; background: var(--bg-deep); padding: 4px; border-radius: var(--radius-md); }

.view-tab {
    font-family: var(--font-sans); font-size: 13px; font-weight: 600;
    color: var(--text-muted); padding: 6px 16px; border-radius: var(--radius-sm);
    cursor: pointer; transition: all 0.2s ease; border: none; background: transparent;
    white-space: nowrap; display: flex; align-items: center; gap: 6px;
    text-decoration: none;
}
.view-tab:hover { color: var(--text-secondary); background: var(--bg-hover); }
.view-tab.active { background: var(--bg-primary); color: var(--accent); box-shadow: 0 1px 3px rgba(0,0,0,0.06); }
.view-tab svg { opacity: 0.7; }
.view-tab.active svg { opacity: 1; stroke: var(--accent); }

.topbar-right { display: flex; align-items: center; gap: 16px; }

.status-pill {
    display: flex; align-items: center; gap: 8px;
    font-family: var(--font-mono); font-size: 12px; color: var(--text-muted);
    background: var(--bg-deep); padding: 5px 14px; border-radius: 20px;
}
.status-dot {
    width: 8px; height: 8px; border-radius: 50%; background: var(--success);
    animation: pulse-dot 2.5s ease infinite;
}
@keyframes pulse-dot {
    0%, 100% { opacity: 1; box-shadow: 0 0 0 0 rgba(22, 163, 74, 0.3); }
    50% { opacity: 0.7; box-shadow: 0 0 0 5px rgba(22, 163, 74, 0); }
}

.env-selector {
    font-family: var(--font-sans); font-size: 13px; font-weight: 500;
    background: var(--bg-primary); border: 1px solid var(--border); color: var(--text-secondary);
    padding: 6px 14px; border-radius: var(--radius-sm); cursor: pointer; outline: none;
}
.env-selector:focus { border-color: var(--accent); }


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INSIGHTS LAYOUT
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.insights-container {
    height: calc(100vh - 56px);
    overflow-y: auto;
    overflow-x: hidden;
    padding: 24px 32px 48px;
    scroll-behavior: smooth;
}

/* â”€â”€â”€ Toolbar â”€â”€â”€ */
.insights-toolbar {
    display: flex; align-items: center; gap: 12px;
    margin-bottom: 24px;
    padding: 12px 16px;
    background: var(--bg-primary);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
}

.insights-toolbar label {
    font-size: 12px; font-weight: 600; color: var(--text-muted);
    text-transform: uppercase; letter-spacing: 0.5px;
}

.insights-toolbar select {
    font-family: var(--font-sans); font-size: 13px; font-weight: 500;
    background: var(--bg-elevated); border: 1px solid var(--border); color: var(--text-secondary);
    padding: 6px 12px; border-radius: var(--radius-sm); cursor: pointer; outline: none;
}
.insights-toolbar select:focus { border-color: var(--accent); }

.toolbar-spacer { flex: 1; }

.refresh-btn {
    font-family: var(--font-sans); font-size: 13px; font-weight: 600;
    color: var(--accent); background: var(--accent-dim); border: 1px solid transparent;
    padding: 6px 16px; border-radius: var(--radius-sm); cursor: pointer; transition: all 0.15s;
    display: flex; align-items: center; gap: 6px;
}
.refresh-btn:hover { background: var(--accent-hover); border-color: var(--accent); }

.last-updated {
    font-family: var(--font-mono); font-size: 11px; color: var(--text-muted);
}

/* â”€â”€â”€ Sections â”€â”€â”€ */
.insights-section {
    margin-bottom: 20px;
    background: var(--bg-primary);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    overflow: hidden;
}

.insights-section-header {
    display: flex; align-items: center; gap: 12px;
    padding: 14px 20px;
    cursor: pointer;
    user-select: none;
    transition: background 0.15s;
    border-bottom: 1px solid transparent;
}
.insights-section-header:hover { background: var(--bg-hover); }
.insights-section-header.expanded { border-bottom-color: var(--border-subtle); }

.section-chevron {
    width: 20px; height: 20px; flex-shrink: 0;
    display: flex; align-items: center; justify-content: center;
    transition: transform 0.2s ease;
    color: var(--text-muted);
}
.section-chevron.expanded { transform: rotate(90deg); }

.section-title {
    font-size: 15px; font-weight: 700; color: var(--text-primary);
}
.section-subtitle {
    font-size: 12px; color: var(--text-muted); font-weight: 500;
    margin-left: 4px;
}
.section-moment-tag {
    font-family: var(--font-mono); font-size: 10px; font-weight: 600;
    color: var(--accent); background: var(--accent-dim);
    padding: 2px 8px; border-radius: 10px; letter-spacing: 0.3px;
}

.insights-section-body {
    padding: 20px;
    display: none;
}
.insights-section-body.expanded { display: block; }

/* â”€â”€â”€ Grid â”€â”€â”€ */
.insights-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 16px;
}
.insights-grid-2 {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
}
.insights-grid-3 {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
}
.insights-grid-4 {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
}

/* â”€â”€â”€ Cards â”€â”€â”€ */
.insights-card {
    background: var(--bg-elevated);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-md);
    padding: 16px;
    transition: border-color 0.15s;
}
.insights-card:hover { border-color: var(--border); }

.insights-card-header {
    display: flex; align-items: center; justify-content: space-between;
    margin-bottom: 12px;
}
.insights-card-label {
    font-size: 11px; font-weight: 600; color: var(--text-muted);
    text-transform: uppercase; letter-spacing: 0.5px;
}
.insights-card-qid {
    font-family: var(--font-mono); font-size: 10px; color: var(--text-muted);
    opacity: 0.5;
}

.insights-card-body { font-size: 13px; color: var(--text-secondary); }

.insights-card--full {
    grid-column: 1 / -1;
}

.insights-card--detector {
    background: var(--bg-elevated);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-md);
    padding: 16px;
    border-left: 3px solid var(--border);
}
.insights-card--detector.detector-ok { border-left-color: var(--success); }
.insights-card--detector.detector-warn { border-left-color: var(--warning); }
.insights-card--detector.detector-error { border-left-color: var(--error); }

/* â”€â”€â”€ Big Numbers â”€â”€â”€ */
.insights-big-number {
    font-family: var(--font-sans); font-size: 28px; font-weight: 800;
    color: var(--text-primary); line-height: 1;
}
.insights-big-number.small { font-size: 22px; }

.insights-metric-row {
    display: flex; align-items: baseline; gap: 8px;
    margin-bottom: 4px;
}

/* â”€â”€â”€ Badges & Pills â”€â”€â”€ */
.insights-badge {
    display: inline-flex; align-items: center; gap: 4px;
    font-family: var(--font-mono); font-size: 11px; font-weight: 600;
    padding: 2px 10px; border-radius: 12px;
}
.insights-badge--green { background: rgba(22,163,74,0.1); color: #16a34a; }
.insights-badge--amber { background: rgba(217,119,6,0.1); color: #d97706; }
.insights-badge--red { background: rgba(220,38,38,0.1); color: #dc2626; }
.insights-badge--blue { background: rgba(37,99,235,0.1); color: #2563eb; }
.insights-badge--purple { background: rgba(124,58,237,0.1); color: #7c3aed; }
.insights-badge--gray { background: rgba(148,163,184,0.1); color: #64748b; }

.insights-pill {
    display: inline-flex; align-items: center; justify-content: center;
    font-family: var(--font-sans); font-size: 32px; font-weight: 800;
    width: 72px; height: 72px; border-radius: 50%;
}
.insights-pill--green { background: rgba(22,163,74,0.1); color: #16a34a; }
.insights-pill--amber { background: rgba(217,119,6,0.1); color: #d97706; }
.insights-pill--red { background: rgba(220,38,38,0.1); color: #dc2626; }

/* â”€â”€â”€ Trend Arrows â”€â”€â”€ */
.insights-trend {
    display: inline-flex; align-items: center; gap: 4px;
    font-size: 12px; font-weight: 600;
}
.insights-trend--up { color: var(--success); }
.insights-trend--down { color: var(--error); }
.insights-trend--flat { color: var(--text-muted); }
.insights-trend--good-down { color: var(--success); }

/* â”€â”€â”€ Status Bar (Q1) â”€â”€â”€ */
.fleet-status-bar {
    display: flex; height: 28px; border-radius: 6px; overflow: hidden;
    margin-bottom: 10px;
}
.fleet-status-bar .segment {
    display: flex; align-items: center; justify-content: center;
    font-family: var(--font-mono); font-size: 11px; font-weight: 600;
    color: white; transition: width 0.3s ease;
    min-width: 30px;
}

/* â”€â”€â”€ Sparkline (Q4) â”€â”€â”€ */
.sparkline-container {
    margin-top: 8px;
}
.sparkline-container svg { display: block; width: 100%; }

/* â”€â”€â”€ Horizontal Bars â”€â”€â”€ */
.insights-bar-row {
    display: flex; align-items: center; gap: 10px;
    margin-bottom: 8px;
}
.insights-bar-label {
    font-family: var(--font-mono); font-size: 11px; color: var(--text-secondary);
    width: 120px; text-align: right; flex-shrink: 0;
    overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
}
.insights-bar-track {
    flex: 1; height: 18px; background: var(--bg-hover); border-radius: 4px; overflow: hidden;
}
.insights-bar-fill {
    height: 100%; border-radius: 4px; transition: width 0.3s ease;
    display: flex; align-items: center; padding-left: 6px;
    font-family: var(--font-mono); font-size: 10px; color: white; font-weight: 600;
}
.insights-bar-value {
    font-family: var(--font-mono); font-size: 11px; color: var(--text-muted);
    width: 60px; flex-shrink: 0;
}

/* â”€â”€â”€ Tables â”€â”€â”€ */
.insights-table {
    width: 100%; border-collapse: collapse; font-size: 12px;
}
.insights-table th {
    font-weight: 600; color: var(--text-muted); text-transform: uppercase;
    letter-spacing: 0.5px; font-size: 10px; padding: 8px 10px;
    text-align: left; border-bottom: 1px solid var(--border);
}
.insights-table td {
    padding: 8px 10px; border-bottom: 1px solid var(--border-subtle);
    font-family: var(--font-mono); font-size: 12px; color: var(--text-secondary);
}
.insights-table tr:last-child td { border-bottom: none; }
.insights-table tr:hover td { background: var(--bg-hover); }

/* â”€â”€â”€ Activity Feed (Q5) â”€â”€â”€ */
.activity-feed {
    max-height: 180px; overflow-y: auto;
}
.activity-item {
    display: flex; align-items: flex-start; gap: 8px;
    padding: 6px 0; border-bottom: 1px solid var(--border-subtle);
    font-size: 12px;
}
.activity-item:last-child { border-bottom: none; }
.activity-dot {
    width: 7px; height: 7px; border-radius: 50%; flex-shrink: 0; margin-top: 5px;
}
.activity-time {
    font-family: var(--font-mono); font-size: 11px; color: var(--text-muted);
    white-space: nowrap; flex-shrink: 0;
}
.activity-text { color: var(--text-secondary); line-height: 1.4; }
.activity-agent {
    font-family: var(--font-mono); font-weight: 600; color: var(--text-primary);
}
.live-badge-inline {
    display: inline-flex; align-items: center; gap: 4px;
    font-family: var(--font-mono); font-size: 10px; font-weight: 600;
    color: var(--success); background: rgba(22,163,74,0.08);
    padding: 1px 8px; border-radius: 10px;
}
.live-badge-inline .dot {
    width: 5px; height: 5px; border-radius: 50%; background: var(--success);
    animation: pulse-dot 2s ease infinite;
}

/* â”€â”€â”€ Health Gauge (Q37) â”€â”€â”€ */
.gauge-container {
    display: flex; flex-direction: column; align-items: center;
    padding: 12px 0;
}
.gauge-svg { width: 140px; height: 140px; }
.gauge-label {
    font-size: 11px; font-weight: 600; text-transform: uppercase;
    letter-spacing: 0.5px; margin-top: 8px;
}

/* â”€â”€â”€ Checklist (Q38) â”€â”€â”€ */
.checklist-item {
    display: flex; align-items: center; gap: 10px;
    padding: 8px 0; border-bottom: 1px solid var(--border-subtle);
    font-size: 13px;
}
.checklist-item:last-child { border-bottom: none; }
.check-icon { width: 20px; height: 20px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-size: 14px; }
.check-pass { color: var(--success); }
.check-fail { color: var(--error); }
.check-label { color: var(--text-secondary); flex: 1; }
.check-value { font-family: var(--font-mono); font-size: 12px; color: var(--text-muted); }

/* â”€â”€â”€ Investigation Agent Selector â”€â”€â”€ */
.investigation-agent-bar {
    display: flex; align-items: center; gap: 12px;
    padding: 10px 14px; margin-bottom: 16px;
    background: var(--accent-dim); border-radius: var(--radius-sm);
    border: 1px solid rgba(194,65,12,0.12);
}
.investigation-agent-bar label {
    font-size: 12px; font-weight: 600; color: var(--accent);
}
.investigation-agent-bar select {
    font-family: var(--font-mono); font-size: 13px; font-weight: 500;
    background: var(--bg-primary); border: 1px solid var(--border); color: var(--text-primary);
    padding: 5px 10px; border-radius: var(--radius-sm); cursor: pointer;
}

/* â”€â”€â”€ Heartbeat Visual (Q7) â”€â”€â”€ */
.hb-bar-track {
    height: 8px; background: var(--bg-hover); border-radius: 4px;
    position: relative; margin: 10px 0 4px;
}
.hb-bar-fill {
    height: 100%; border-radius: 4px; transition: width 0.3s;
}
.hb-bar-threshold {
    position: absolute; top: -3px; bottom: -3px; width: 2px;
    background: var(--text-muted); border-radius: 1px;
}

/* â”€â”€â”€ Token Bar (Q20) â”€â”€â”€ */
.token-bar {
    display: flex; height: 10px; border-radius: 3px; overflow: hidden;
    width: 100px;
}
.token-bar .in { background: var(--active); }
.token-bar .out { background: var(--success); }

/* â”€â”€â”€ Navigation Links â”€â”€â”€ */
.nav-link {
    display: inline-flex; align-items: center; gap: 4px;
    font-size: 12px; font-weight: 600; color: var(--accent);
    text-decoration: none; cursor: pointer;
    transition: opacity 0.15s;
}
.nav-link:hover { opacity: 0.7; }

/* â”€â”€â”€ ROI Calculator â”€â”€â”€ */
.roi-inputs {
    display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px;
    margin-bottom: 16px;
}
.roi-input-group label {
    display: block; font-size: 11px; font-weight: 600; color: var(--text-muted);
    margin-bottom: 4px; text-transform: uppercase; letter-spacing: 0.3px;
}
.roi-input-group input {
    width: 100%; font-family: var(--font-mono); font-size: 13px;
    padding: 6px 10px; border: 1px solid var(--border); border-radius: var(--radius-sm);
    background: var(--bg-primary); color: var(--text-primary); outline: none;
}
.roi-input-group input:focus { border-color: var(--accent); }
.roi-result {
    display: flex; gap: 20px; padding: 12px; background: var(--bg-primary);
    border-radius: var(--radius-sm); border: 1px solid var(--border-subtle);
}
.roi-result-item { text-align: center; }
.roi-result-item .val { font-size: 18px; font-weight: 800; color: var(--success); }
.roi-result-item .lbl { font-size: 10px; color: var(--text-muted); text-transform: uppercase; margin-top: 2px; }

/* â”€â”€â”€ Verdict banners â”€â”€â”€ */
.verdict-banner {
    padding: 10px 16px; border-radius: var(--radius-sm);
    font-size: 13px; font-weight: 600;
    display: flex; align-items: center; gap: 8px;
    margin-top: 12px;
}
.verdict-banner--green { background: rgba(22,163,74,0.08); color: var(--success); }
.verdict-banner--amber { background: rgba(217,119,6,0.08); color: var(--warning); }
.verdict-banner--red { background: rgba(220,38,38,0.08); color: var(--error); }

/* â”€â”€â”€ Detector grid â”€â”€â”€ */
.detector-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 16px;
    margin-top: 16px;
}

.detector-header {
    display: flex; align-items: center; justify-content: space-between;
    margin-bottom: 10px;
}
.detector-name {
    font-size: 13px; font-weight: 700; color: var(--text-primary);
    display: flex; align-items: center; gap: 6px;
}
.detector-status-dot {
    width: 8px; height: 8px; border-radius: 50%;
}

.detector-summary {
    font-size: 12px; color: var(--text-muted); margin-bottom: 8px;
}
.detector-footer {
    font-family: var(--font-mono); font-size: 10px; color: var(--text-muted);
    margin-top: 8px; opacity: 0.6;
}

/* â”€â”€â”€ Chart placeholder â”€â”€â”€ */
.chart-container {
    width: 100%; position: relative;
}
.chart-container svg { display: block; width: 100%; }

/* â”€â”€â”€ Subsection divider â”€â”€â”€ */
.subsection-label {
    font-size: 12px; font-weight: 700; color: var(--text-muted);
    text-transform: uppercase; letter-spacing: 0.5px;
    margin: 20px 0 12px;
    padding-bottom: 6px;
    border-bottom: 1px solid var(--border-subtle);
}

/* â”€â”€â”€ Misc â”€â”€â”€ */
.muted { color: var(--text-muted); }
.mono { font-family: var(--font-mono); }
.mt-8 { margin-top: 8px; }
.mt-12 { margin-top: 12px; }
.mt-16 { margin-top: 16px; }
.mb-8 { margin-bottom: 8px; }
.mb-16 { margin-bottom: 16px; }
.gap-row { display: flex; align-items: center; gap: 8px; }
.text-sm { font-size: 12px; }
.text-xs { font-size: 11px; }

    </style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TOP BAR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="topbar">
    <div class="topbar-left">
        <a class="logo" href="index.html">
            <div class="logo-hex"><div class="logo-hex-inner"></div></div>
            Hive<span>Board</span>
        </a>
        <div class="workspace-badge">acme-corp</div>
        <div class="view-tabs">
            <a class="view-tab" href="index.html" data-view="mission">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
                Dashboard
            </a>
            <a class="view-tab" href="index.html?view=cost" data-view="cost">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/></svg>
                Costs
            </a>
            <a class="view-tab" href="index.html?view=pipeline" data-view="pipeline">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 6h16M4 12h16M4 18h16"/></svg>
                Pipeline
            </a>
            <a class="view-tab active" href="insights.html" data-view="insights">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
                Insights
            </a>
        </div>
    </div>
    <div class="topbar-right">
        <div class="status-pill">
            <div class="status-dot"></div>
            <span>Connected</span>
        </div>
        <select class="env-selector">
            <option>production</option>
            <option>staging</option>
        </select>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• INSIGHTS BODY â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="insights-container" id="insightsContainer">

    <!-- â”€â”€â”€ Toolbar â”€â”€â”€ -->
    <div class="insights-toolbar">
        <label>Range</label>
        <select id="rangeSelector">
            <option value="1h">1 hour</option>
            <option value="6h">6 hours</option>
            <option value="24h" selected>24 hours</option>
            <option value="7d">7 days</option>
            <option value="30d">30 days</option>
        </select>

        <label style="margin-left:12px;">Agent</label>
        <select id="agentSelector">
            <option value="all">All Agents</option>
            <option value="support-triage-01">support-triage-01</option>
            <option value="doc-processor-02">doc-processor-02</option>
        </select>

        <div class="toolbar-spacer"></div>
        <span class="last-updated">Updated 3s ago</span>
        <button class="refresh-btn">â†» Refresh</button>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SECTION 1: THE GLANCE (Q1â€“Q5)
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="insights-section" id="section0">
        <div class="insights-section-header expanded" onclick="toggleSection(0)">
            <div class="section-chevron expanded" id="chevron0">â–¶</div>
            <span class="section-title">The Glance</span>
            <span class="section-subtitle">â€” Fleet Status at a Glance</span>
            <span class="section-moment-tag">~2 seconds</span>
        </div>
        <div class="insights-section-body expanded" id="body0">

            <!-- Q1â€“Q3: Status row -->
            <div class="insights-grid-3 mb-16">

                <!-- Q1: Are my agents running? -->
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Fleet Status</span>
                        <span class="insights-card-qid">Q1</span>
                    </div>
                    <div class="insights-card-body">
                        <div class="fleet-status-bar">
                            <div class="segment" style="width:40%; background:var(--active);" title="2 processing">2</div>
                            <div class="segment" style="width:20%; background:var(--idle);" title="1 idle">1</div>
                            <div class="segment" style="width:20%; background:var(--warning);" title="1 waiting">1</div>
                            <div class="segment" style="width:20%; background:var(--stuck);" title="1 stuck">1</div>
                        </div>
                        <div class="text-xs muted">
                            5 agents total Â· 2 processing Â· 1 idle Â· 1 waiting Â· 1 stuck
                        </div>
                    </div>
                </div>

                <!-- Q2: Does anything need attention? -->
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Needs Attention</span>
                        <span class="insights-card-qid">Q2</span>
                    </div>
                    <div class="insights-card-body" style="display:flex; align-items:center; gap:16px;">
                        <div class="insights-pill insights-pill--red">3</div>
                        <div>
                            <div class="text-sm" style="color:var(--error); font-weight:600;">1 stuck Â· 1 error</div>
                            <div class="text-xs muted mt-8">2 active issues Â· 1 waiting approval</div>
                        </div>
                    </div>
                </div>

                <!-- Q3: Is anything stuck? -->
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Stuck Agents</span>
                        <span class="insights-card-qid">Q3</span>
                    </div>
                    <div class="insights-card-body">
                        <div class="insights-metric-row">
                            <span class="insights-big-number small" style="color:var(--stuck);">1</span>
                            <span class="insights-badge insights-badge--red">stuck</span>
                        </div>
                        <div class="mt-8 text-xs mono" style="color:var(--text-secondary);">
                            <span style="font-weight:600;">doc-processor-02</span> â€” stuck for 4m12s (threshold: 120s)
                            <br>Task: <span class="muted">task-abc-789</span>
                            <span class="nav-link" style="margin-left:8px;">Investigate â†’</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Q4: Is work flowing? (4 mini sparklines) -->
            <div class="insights-grid-4 mb-16">
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Throughput</span>
                        <span class="insights-card-qid">Q4a</span>
                    </div>
                    <div class="insights-card-body">
                        <div class="insights-metric-row">
                            <span class="insights-big-number small">12.4</span>
                            <span class="text-xs muted">tasks/hr</span>
                            <span class="insights-trend insights-trend--up">â†‘ 8%</span>
                        </div>
                        <div class="sparkline-container">
                            <svg viewBox="0 0 200 50" height="50">
                                <defs><linearGradient id="gFill1" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="var(--active)" stop-opacity="0.15"/><stop offset="100%" stop-color="var(--active)" stop-opacity="0"/></linearGradient></defs>
                                <polygon points="0,40 20,35 40,38 60,30 80,28 100,25 120,20 140,22 160,15 180,12 200,10 200,50 0,50" fill="url(#gFill1)"/>
                                <polyline points="0,40 20,35 40,38 60,30 80,28 100,25 120,20 140,22 160,15 180,12 200,10" fill="none" stroke="var(--active)" stroke-width="2"/>
                            </svg>
                        </div>
                    </div>
                </div>
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Success Rate</span>
                        <span class="insights-card-qid">Q4b</span>
                    </div>
                    <div class="insights-card-body">
                        <div class="insights-metric-row">
                            <span class="insights-big-number small">94.2%</span>
                            <span class="insights-trend insights-trend--up">â†‘ 2.1%</span>
                        </div>
                        <div class="sparkline-container">
                            <svg viewBox="0 0 200 50" height="50">
                                <defs><linearGradient id="gFill2" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="var(--success)" stop-opacity="0.15"/><stop offset="100%" stop-color="var(--success)" stop-opacity="0"/></linearGradient></defs>
                                <polygon points="0,20 30,18 60,22 90,15 120,12 150,10 180,8 200,10 200,50 0,50" fill="url(#gFill2)"/>
                                <polyline points="0,20 30,18 60,22 90,15 120,12 150,10 180,8 200,10" fill="none" stroke="var(--success)" stroke-width="2"/>
                            </svg>
                        </div>
                    </div>
                </div>
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Errors</span>
                        <span class="insights-card-qid">Q4c</span>
                    </div>
                    <div class="insights-card-body">
                        <div class="insights-metric-row">
                            <span class="insights-big-number small" style="color:var(--error);">7</span>
                            <span class="text-xs muted">in 24h</span>
                            <span class="insights-trend insights-trend--down">â†“ 3</span>
                        </div>
                        <div class="sparkline-container">
                            <svg viewBox="0 0 200 50" height="50">
                                <defs><linearGradient id="gFill3" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="var(--error)" stop-opacity="0.12"/><stop offset="100%" stop-color="var(--error)" stop-opacity="0"/></linearGradient></defs>
                                <polygon points="0,30 30,15 60,25 90,10 120,35 150,30 180,40 200,38 200,50 0,50" fill="url(#gFill3)"/>
                                <polyline points="0,30 30,15 60,25 90,10 120,35 150,30 180,40 200,38" fill="none" stroke="var(--error)" stroke-width="2"/>
                            </svg>
                        </div>
                    </div>
                </div>
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">LLM Cost/Task</span>
                        <span class="insights-card-qid">Q4d</span>
                    </div>
                    <div class="insights-card-body">
                        <div class="insights-metric-row">
                            <span class="insights-big-number small">$0.08</span>
                            <span class="insights-trend insights-trend--good-down">â†“ 12%</span>
                        </div>
                        <div class="sparkline-container">
                            <svg viewBox="0 0 200 50" height="50">
                                <defs><linearGradient id="gFill4" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="var(--llm)" stop-opacity="0.12"/><stop offset="100%" stop-color="var(--llm)" stop-opacity="0"/></linearGradient></defs>
                                <polygon points="0,10 30,12 60,15 90,18 120,22 150,25 180,28 200,30 200,50 0,50" fill="url(#gFill4)"/>
                                <polyline points="0,10 30,12 60,15 90,18 120,22 150,25 180,28 200,30" fill="none" stroke="var(--llm)" stroke-width="2"/>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Q5: Activity Feed -->
            <div class="insights-card insights-card--full">
                <div class="insights-card-header">
                    <span class="insights-card-label">Live Activity</span>
                    <span class="live-badge-inline"><span class="dot"></span> LIVE</span>
                </div>
                <div class="insights-card-body">
                    <div class="activity-feed">
                        <div class="activity-item">
                            <div class="activity-dot" style="background:var(--success);"></div>
                            <span class="activity-time">2s ago</span>
                            <span class="activity-text"><span class="activity-agent">support-triage-01</span>: Task task-xyz-456 completed â€” routed ticket to billing team</span>
                        </div>
                        <div class="activity-item">
                            <div class="activity-dot" style="background:var(--active);"></div>
                            <span class="activity-time">18s ago</span>
                            <span class="activity-text"><span class="activity-agent">support-triage-01</span>: LLM call classify_intent using gpt-4o (1.2K tokens)</span>
                        </div>
                        <div class="activity-item">
                            <div class="activity-dot" style="background:var(--error);"></div>
                            <span class="activity-time">1m ago</span>
                            <span class="activity-text"><span class="activity-agent">doc-processor-02</span>: Action extract_tables failed â€” timeout after 30s</span>
                        </div>
                        <div class="activity-item">
                            <div class="activity-dot" style="background:var(--warning);"></div>
                            <span class="activity-time">3m ago</span>
                            <span class="activity-text"><span class="activity-agent">doc-processor-02</span>: Issue reported â€” PDF parsing intermittent failure (Ã—4)</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SECTION 2: THE INVESTIGATION (Q6â€“Q16)
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="insights-section" id="section1">
        <div class="insights-section-header expanded" onclick="toggleSection(1)">
            <div class="section-chevron expanded" id="chevron1">â–¶</div>
            <span class="section-title">The Investigation</span>
            <span class="section-subtitle">â€” Agent & Task Deep Dive</span>
            <span class="section-moment-tag">~2â€“5 min</span>
        </div>
        <div class="insights-section-body expanded" id="body1">

            <div class="investigation-agent-bar">
                <label>Investigating</label>
                <select id="investigationAgent">
                    <option value="support-triage-01">support-triage-01</option>
                    <option value="doc-processor-02">doc-processor-02</option>
                </select>
                <span class="text-xs muted" style="margin-left:auto;">Click any agent name above to auto-select</span>
            </div>

            <!-- Q6â€“Q9 -->
            <div class="insights-grid-4 mb-16">
                <!-- Q6: What is this agent doing? -->
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Current Status</span>
                        <span class="insights-card-qid">Q6</span>
                    </div>
                    <div class="insights-card-body">
                        <div class="gap-row mb-8">
                            <span class="insights-badge insights-badge--blue">processing</span>
                        </div>
                        <div class="text-xs mono">Task: <strong>task-xyz-456</strong></div>
                        <div class="text-xs mono muted">Type: support_ticket</div>
                        <div class="text-xs mono muted">Elapsed: 1m 42s</div>
                        <div class="mt-8 text-xs muted">Last 1h: 4 completed, 1 failed</div>
                    </div>
                </div>

                <!-- Q7: Heartbeat health -->
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Heartbeat</span>
                        <span class="insights-card-qid">Q7</span>
                    </div>
                    <div class="insights-card-body">
                        <div class="gap-row mb-8">
                            <div style="width:10px;height:10px;border-radius:50%;background:var(--success);"></div>
                            <span class="text-sm" style="font-weight:600;color:var(--success);">Healthy</span>
                        </div>
                        <div class="text-xs mono muted">Last beat: 12s ago</div>
                        <div class="text-xs mono muted">Threshold: 120s</div>
                        <div class="hb-bar-track">
                            <div class="hb-bar-fill" style="width:10%;background:var(--success);"></div>
                            <div class="hb-bar-threshold" style="left:100%;"></div>
                        </div>
                        <div class="text-xs muted">12s / 120s</div>
                    </div>
                </div>

                <!-- Q8: Pending work -->
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Queue</span>
                        <span class="insights-card-qid">Q8</span>
                    </div>
                    <div class="insights-card-body">
                        <div class="insights-metric-row">
                            <span class="insights-big-number small">2</span>
                            <span class="insights-badge insights-badge--amber">pending</span>
                        </div>
                        <div class="mt-8">
                            <table class="insights-table">
                                <thead><tr><th>Pri</th><th>Summary</th><th>Age</th></tr></thead>
                                <tbody>
                                    <tr><td>high</td><td>Billing dispute #4421</td><td>2m</td></tr>
                                    <tr><td>normal</td><td>Password reset #4422</td><td>45s</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Q9: Self-reported issues -->
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Issues</span>
                        <span class="insights-card-qid">Q9</span>
                    </div>
                    <div class="insights-card-body">
                        <div class="insights-metric-row">
                            <span class="insights-big-number small" style="color:var(--warning);">1</span>
                            <span class="text-xs muted">active issue</span>
                        </div>
                        <div class="mt-8">
                            <div class="gap-row">
                                <span class="insights-badge insights-badge--amber">medium</span>
                                <span class="text-xs mono">api_reliability: Stripe API intermittent 503 (Ã—6)</span>
                            </div>
                            <div class="mt-8">
                                <span class="insights-badge insights-badge--gray" style="font-size:9px;">Recurring</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Q10â€“Q16: Recent Tasks Table with nav links -->
            <div class="subsection-label">Recent Tasks (Q10â€“Q16)</div>
            <div class="insights-card insights-card--full">
                <table class="insights-table">
                    <thead>
                        <tr>
                            <th>Task ID</th><th>Type</th><th>Status</th><th>Duration</th><th>Cost</th><th>Errors</th><th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>task-xyz-456</td>
                            <td>support_ticket</td>
                            <td><span class="insights-badge insights-badge--blue">processing</span></td>
                            <td>1m42s</td>
                            <td>$0.12</td>
                            <td>0</td>
                            <td><span class="nav-link">View Timeline â†’</span></td>
                        </tr>
                        <tr>
                            <td>task-xyz-455</td>
                            <td>support_ticket</td>
                            <td><span class="insights-badge insights-badge--green">completed</span></td>
                            <td>2m15s</td>
                            <td>$0.09</td>
                            <td>0</td>
                            <td><span class="nav-link">View Timeline â†’</span></td>
                        </tr>
                        <tr>
                            <td>task-xyz-454</td>
                            <td>support_ticket</td>
                            <td><span class="insights-badge insights-badge--red">failed</span></td>
                            <td>45s</td>
                            <td>$0.04</td>
                            <td>2</td>
                            <td><span class="nav-link">View Errors â†’</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SECTION 3: THE OPTIMIZATION (Q17â€“Q28)
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="insights-section" id="section2">
        <div class="insights-section-header expanded" onclick="toggleSection(2)">
            <div class="section-chevron expanded" id="chevron2">â–¶</div>
            <span class="section-title">The Optimization</span>
            <span class="section-subtitle">â€” Cost & Reliability</span>
            <span class="section-moment-tag">~10â€“15 min</span>
        </div>
        <div class="insights-section-body expanded" id="body2">

            <!-- Q17: Cost Overview -->
            <div class="insights-grid-2 mb-16">
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Total Cost (24h)</span>
                        <span class="insights-card-qid">Q17</span>
                    </div>
                    <div class="insights-card-body">
                        <div class="insights-big-number mb-8">$4.82</div>
                        <div class="text-xs muted mb-16">147 LLM calls Â· 312K tokens in Â· 48K tokens out</div>
                        <div class="subsection-label" style="margin-top:0;">By Agent</div>
                        <div class="insights-bar-row">
                            <span class="insights-bar-label">support-triage-01</span>
                            <div class="insights-bar-track"><div class="insights-bar-fill" style="width:62%;background:var(--active);">$2.99</div></div>
                            <span class="insights-bar-value">92 calls</span>
                        </div>
                        <div class="insights-bar-row">
                            <span class="insights-bar-label">doc-processor-02</span>
                            <div class="insights-bar-track"><div class="insights-bar-fill" style="width:38%;background:var(--llm);">$1.83</div></div>
                            <span class="insights-bar-value">55 calls</span>
                        </div>
                    </div>
                </div>

                <!-- Q18: Model Efficiency -->
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Model Efficiency</span>
                        <span class="insights-card-qid">Q18</span>
                    </div>
                    <div class="insights-card-body">
                        <table class="insights-table">
                            <thead><tr><th>Model</th><th>Calls</th><th>Avg $/Call</th><th>$/1K Tok</th><th>Verdict</th></tr></thead>
                            <tbody>
                                <tr>
                                    <td>gpt-4o</td><td>89</td><td>$0.042</td><td>$0.018</td>
                                    <td><span class="insights-badge insights-badge--green">Efficient</span></td>
                                </tr>
                                <tr>
                                    <td>gpt-4-turbo</td><td>38</td><td>$0.031</td><td>$0.025</td>
                                    <td><span class="insights-badge insights-badge--amber">Review</span></td>
                                </tr>
                                <tr>
                                    <td>claude-3-haiku</td><td>20</td><td>$0.003</td><td>$0.002</td>
                                    <td><span class="insights-badge insights-badge--green">Efficient</span></td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="text-xs muted mt-8">
                            ğŸ’¡ gpt-4-turbo costs 1.4Ã— more per token than gpt-4o for the same <em>classify_intent</em> calls
                        </div>
                    </div>
                </div>
            </div>

            <!-- Q19: Cost Timeline + Q21: Agent Cost Comparison -->
            <div class="insights-grid-2 mb-16">
                <!-- Q19: Cost Spike -->
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Cost Timeline</span>
                        <span class="insights-card-qid">Q19</span>
                    </div>
                    <div class="insights-card-body">
                        <div class="chart-container">
                            <svg viewBox="0 0 400 120" height="120">
                                <defs>
                                    <linearGradient id="costGrad" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="var(--llm)" stop-opacity="0.2"/><stop offset="100%" stop-color="var(--llm)" stop-opacity="0"/></linearGradient>
                                </defs>
                                <!-- Grid lines -->
                                <line x1="40" y1="20" x2="390" y2="20" stroke="var(--border-subtle)" stroke-width="0.5"/>
                                <line x1="40" y1="50" x2="390" y2="50" stroke="var(--border-subtle)" stroke-width="0.5"/>
                                <line x1="40" y1="80" x2="390" y2="80" stroke="var(--border-subtle)" stroke-width="0.5"/>
                                <!-- Y labels -->
                                <text x="35" y="24" text-anchor="end" font-size="9" fill="var(--text-muted)" font-family="var(--font-mono)">$0.60</text>
                                <text x="35" y="54" text-anchor="end" font-size="9" fill="var(--text-muted)" font-family="var(--font-mono)">$0.30</text>
                                <text x="35" y="84" text-anchor="end" font-size="9" fill="var(--text-muted)" font-family="var(--font-mono)">$0.00</text>
                                <!-- Area -->
                                <polygon points="50,70 100,65 150,60 200,30 250,55 300,58 350,62 380,65 380,80 50,80" fill="url(#costGrad)"/>
                                <polyline points="50,70 100,65 150,60 200,30 250,55 300,58 350,62 380,65" fill="none" stroke="var(--llm)" stroke-width="2"/>
                                <!-- Spike marker -->
                                <line x1="200" y1="20" x2="200" y2="80" stroke="var(--error)" stroke-width="1" stroke-dasharray="3,3"/>
                                <circle cx="200" cy="30" r="4" fill="var(--error)"/>
                                <!-- X labels -->
                                <text x="50" y="98" font-size="9" fill="var(--text-muted)" font-family="var(--font-mono)">00:00</text>
                                <text x="200" y="98" font-size="9" fill="var(--text-muted)" font-family="var(--font-mono)">12:00</text>
                                <text x="370" y="98" font-size="9" fill="var(--text-muted)" font-family="var(--font-mono)">now</text>
                            </svg>
                        </div>
                        <div class="text-xs" style="color:var(--error); font-weight:600; margin-top:4px;">
                            âš¡ Spike at 12:00 â€” 18 calls, 42K tokens (vs avg 8 calls/bucket)
                        </div>
                    </div>
                </div>

                <!-- Q21: Agent Cost Comparison -->
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Agent Cost Comparison</span>
                        <span class="insights-card-qid">Q21</span>
                    </div>
                    <div class="insights-card-body">
                        <div class="text-xs muted mb-8">Group: <strong>support_agent</strong> (2 agents)</div>
                        <div class="insights-bar-row">
                            <span class="insights-bar-label">support-triage-01</span>
                            <div class="insights-bar-track"><div class="insights-bar-fill" style="width:82%;background:var(--active);">$2.99</div></div>
                            <span class="insights-bar-value" style="color:var(--text-secondary);">+37%</span>
                        </div>
                        <div class="insights-bar-row">
                            <span class="insights-bar-label">doc-processor-02</span>
                            <div class="insights-bar-track"><div class="insights-bar-fill" style="width:50%;background:var(--llm);">$1.83</div></div>
                            <span class="insights-bar-value" style="color:var(--success);">avg</span>
                        </div>
                        <div class="text-xs muted mt-8">No outliers detected within same agent types</div>
                    </div>
                </div>
            </div>

            <!-- Q20: Prompt Bloat (full width) -->
            <div class="insights-card insights-card--full mb-16">
                <div class="insights-card-header">
                    <span class="insights-card-label">Prompt Bloat Analysis</span>
                    <span class="insights-card-qid">Q20</span>
                </div>
                <div class="insights-card-body">
                    <div class="gap-row mb-8">
                        <span class="text-sm" style="font-weight:600;">Fleet avg in/out ratio: 6.5:1</span>
                        <span class="insights-badge insights-badge--green">No bloat</span>
                    </div>
                    <div class="text-xs muted">0 calls exceeded threshold (ratio >10 AND tokens_in >5,000). Prompts look healthy.</div>
                </div>
            </div>

            <!-- Smart Detectors -->
            <div class="subsection-label">Smart Detectors (Q22â€“Q28)</div>
            <div class="detector-grid">

                <!-- Q22: Silent Drop -->
                <div class="insights-card--detector detector-ok">
                    <div class="detector-header">
                        <span class="detector-name"><div class="detector-status-dot" style="background:var(--success);"></div> Silent Drop Detection</span>
                        <span class="insights-card-qid">Q22</span>
                    </div>
                    <div class="detector-summary">No silent drops detected. All queued items are within normal processing time.</div>
                    <div class="detector-footer">Last checked: 3s ago</div>
                </div>

                <!-- Q23: Contradiction -->
                <div class="insights-card--detector detector-warn">
                    <div class="detector-header">
                        <span class="detector-name"><div class="detector-status-dot" style="background:var(--warning);"></div> Status/Queue Contradiction</span>
                        <span class="insights-card-qid">Q23</span>
                    </div>
                    <div class="detector-summary" style="color:var(--warning);font-weight:600;">1 contradiction found</div>
                    <div class="mt-8">
                        <table class="insights-table">
                            <thead><tr><th>Agent</th><th>Status</th><th>Queue</th><th>Severity</th></tr></thead>
                            <tbody>
                                <tr>
                                    <td>doc-processor-02</td>
                                    <td><span class="insights-badge insights-badge--gray">idle</span></td>
                                    <td>2 items</td>
                                    <td><span class="insights-badge insights-badge--amber">medium</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="text-xs muted mt-8">ğŸ’¡ Agent may need restart or queue processor check</div>
                    <div class="detector-footer">Last checked: 3s ago</div>
                </div>

                <!-- Q24: Recurring Failures -->
                <div class="insights-card--detector detector-warn">
                    <div class="detector-header">
                        <span class="detector-name"><div class="detector-status-dot" style="background:var(--warning);"></div> Recurring Failures</span>
                        <span class="insights-card-qid">Q24</span>
                    </div>
                    <div class="detector-summary" style="color:var(--warning);font-weight:600;">1 recurring issue across agents</div>
                    <div class="mt-8">
                        <table class="insights-table">
                            <thead><tr><th>Category</th><th>Agent</th><th>Ã—Count</th><th>Severity</th></tr></thead>
                            <tbody>
                                <tr>
                                    <td>api_reliability</td>
                                    <td>doc-processor-02</td>
                                    <td>6</td>
                                    <td><span class="insights-badge insights-badge--amber">medium</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="detector-footer">Last checked: 3s ago</div>
                </div>

                <!-- Q25: Heartbeat Drift -->
                <div class="insights-card--detector detector-ok">
                    <div class="detector-header">
                        <span class="detector-name"><div class="detector-status-dot" style="background:var(--success);"></div> Heartbeat Drift</span>
                        <span class="insights-card-qid">Q25</span>
                    </div>
                    <div class="detector-summary">Last 50 heartbeats analyzed. Payload structure is stable â€” no drift detected.</div>
                    <div class="detector-footer">Last checked: 3s ago</div>
                </div>

                <!-- Q26: Approval Queue -->
                <div class="insights-card--detector detector-warn">
                    <div class="detector-header">
                        <span class="detector-name"><div class="detector-status-dot" style="background:var(--warning);"></div> Approval Queue</span>
                        <span class="insights-card-qid">Q26</span>
                    </div>
                    <div class="detector-summary" style="color:var(--warning);font-weight:600;">1 agent waiting for approval</div>
                    <div class="mt-8">
                        <table class="insights-table">
                            <thead><tr><th>Agent</th><th>Task</th><th>Waiting</th></tr></thead>
                            <tbody>
                                <tr>
                                    <td>support-triage-01</td>
                                    <td>task-xyz-450</td>
                                    <td style="color:var(--warning);font-weight:600;">12m 30s</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="detector-footer">Last checked: 3s ago</div>
                </div>

                <!-- Q27: Action Failure Patterns -->
                <div class="insights-card--detector detector-error">
                    <div class="detector-header">
                        <span class="detector-name"><div class="detector-status-dot" style="background:var(--error);"></div> Action Failure Patterns</span>
                        <span class="insights-card-qid">Q27</span>
                    </div>
                    <div class="detector-summary" style="color:var(--error);font-weight:600;">1 action with high failure rate</div>
                    <div class="mt-8">
                        <table class="insights-table">
                            <thead><tr><th>Action</th><th>Fail</th><th>OK</th><th>Rate</th><th>Agents</th></tr></thead>
                            <tbody>
                                <tr>
                                    <td>extract_tables</td>
                                    <td style="color:var(--error);">8</td>
                                    <td>14</td>
                                    <td><span class="insights-badge insights-badge--red">36%</span></td>
                                    <td>1</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="detector-footer">Last checked: 3s ago</div>
                </div>

                <!-- Q28: Unresolved Recurring Issues -->
                <div class="insights-card--detector detector-warn">
                    <div class="detector-header">
                        <span class="detector-name"><div class="detector-status-dot" style="background:var(--warning);"></div> Unresolved Issues</span>
                        <span class="insights-card-qid">Q28</span>
                    </div>
                    <div class="detector-summary" style="color:var(--warning);font-weight:600;">1 chronic unresolved issue</div>
                    <div class="mt-8">
                        <div class="gap-row">
                            <span class="insights-badge insights-badge--amber">medium</span>
                            <span class="insights-badge insights-badge--gray" style="font-size:9px;">Chronic</span>
                            <span class="text-xs mono">api_reliability: Stripe API 503 (Ã—6) â€” doc-processor-02</span>
                        </div>
                    </div>
                    <div class="detector-footer">Last checked: 3s ago</div>
                </div>
            </div>

        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SECTION 4: THE REVIEW (Q29â€“Q38)
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="insights-section" id="section3">
        <div class="insights-section-header expanded" onclick="toggleSection(3)">
            <div class="section-chevron expanded" id="chevron3">â–¶</div>
            <span class="section-title">The Review</span>
            <span class="section-subtitle">â€” Trends & Fleet Health</span>
            <span class="section-moment-tag">~20â€“30 min</span>
        </div>
        <div class="insights-section-body expanded" id="body3">

            <!-- Q29 + Q30: Trend charts -->
            <div class="insights-grid-2 mb-16">
                <!-- Q29: Success Rate Trend -->
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Success Rate Trend</span>
                        <span class="insights-card-qid">Q29</span>
                    </div>
                    <div class="insights-card-body">
                        <div class="insights-metric-row mb-8">
                            <span class="insights-big-number small">94.2%</span>
                            <span class="insights-trend insights-trend--up">â†‘ 2.1% from 92.1%</span>
                        </div>
                        <div class="chart-container">
                            <svg viewBox="0 0 400 100" height="100">
                                <line x1="40" y1="20" x2="390" y2="20" stroke="var(--border-subtle)" stroke-width="0.5"/>
                                <line x1="40" y1="50" x2="390" y2="50" stroke="var(--border-subtle)" stroke-width="0.5" stroke-dasharray="4,4"/>
                                <line x1="40" y1="80" x2="390" y2="80" stroke="var(--border-subtle)" stroke-width="0.5"/>
                                <text x="35" y="24" text-anchor="end" font-size="9" fill="var(--text-muted)" font-family="var(--font-mono)">100%</text>
                                <text x="35" y="54" text-anchor="end" font-size="9" fill="var(--text-muted)" font-family="var(--font-mono)">90%</text>
                                <text x="35" y="84" text-anchor="end" font-size="9" fill="var(--text-muted)" font-family="var(--font-mono)">80%</text>
                                <polyline points="50,55 100,52 150,60 200,48 250,40 300,35 350,30 380,28" fill="none" stroke="var(--success)" stroke-width="2"/>
                                <circle cx="50" cy="55" r="3" fill="var(--success)"/>
                                <circle cx="150" cy="60" r="3" fill="var(--success)"/>
                                <circle cx="250" cy="40" r="3" fill="var(--success)"/>
                                <circle cx="380" cy="28" r="3" fill="var(--success)"/>
                                <!-- Avg line -->
                                <line x1="50" y1="42" x2="380" y2="42" stroke="var(--text-muted)" stroke-width="1" stroke-dasharray="4,4" opacity="0.5"/>
                                <text x="50" y="90" font-size="9" fill="var(--text-muted)" font-family="var(--font-mono)">00:00</text>
                                <text x="380" y="90" font-size="9" fill="var(--text-muted)" font-family="var(--font-mono)" text-anchor="end">now</text>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Q30: Duration Trend -->
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Duration Trend</span>
                        <span class="insights-card-qid">Q30</span>
                    </div>
                    <div class="insights-card-body">
                        <div class="insights-metric-row mb-8">
                            <span class="insights-big-number small">2m 08s</span>
                            <span class="insights-trend insights-trend--good-down">â†“ 15s faster</span>
                        </div>
                        <div class="chart-container">
                            <svg viewBox="0 0 400 100" height="100">
                                <line x1="40" y1="20" x2="390" y2="20" stroke="var(--border-subtle)" stroke-width="0.5"/>
                                <line x1="40" y1="50" x2="390" y2="50" stroke="var(--border-subtle)" stroke-width="0.5" stroke-dasharray="4,4"/>
                                <line x1="40" y1="80" x2="390" y2="80" stroke="var(--border-subtle)" stroke-width="0.5"/>
                                <text x="35" y="24" text-anchor="end" font-size="9" fill="var(--text-muted)" font-family="var(--font-mono)">4m</text>
                                <text x="35" y="54" text-anchor="end" font-size="9" fill="var(--text-muted)" font-family="var(--font-mono)">2m</text>
                                <text x="35" y="84" text-anchor="end" font-size="9" fill="var(--text-muted)" font-family="var(--font-mono)">0m</text>
                                <polyline points="50,35 100,40 150,30 200,45 250,48 300,50 350,52 380,50" fill="none" stroke="var(--active)" stroke-width="2"/>
                                <circle cx="50" cy="35" r="3" fill="var(--active)"/>
                                <circle cx="200" cy="45" r="3" fill="var(--active)"/>
                                <circle cx="380" cy="50" r="3" fill="var(--active)"/>
                                <text x="50" y="90" font-size="9" fill="var(--text-muted)" font-family="var(--font-mono)">00:00</text>
                                <text x="380" y="90" font-size="9" fill="var(--text-muted)" font-family="var(--font-mono)" text-anchor="end">now</text>
                            </svg>
                        </div>
                        <div class="text-xs muted mt-8">Fastest: 32s Â· Slowest: 4m 10s</div>
                    </div>
                </div>
            </div>

            <!-- Q31 + Q32 -->
            <div class="insights-grid-2 mb-16">
                <!-- Q31: Agent Reliability Ranking -->
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Agent Reliability Ranking</span>
                        <span class="insights-card-qid">Q31</span>
                    </div>
                    <div class="insights-card-body">
                        <div class="insights-bar-row">
                            <span class="insights-bar-label">support-triage-01</span>
                            <div class="insights-bar-track"><div class="insights-bar-fill" style="width:96%;background:var(--success);">96%</div></div>
                            <span class="insights-bar-value">48/50</span>
                        </div>
                        <div class="insights-bar-row">
                            <span class="insights-bar-label">doc-processor-02</span>
                            <div class="insights-bar-track"><div class="insights-bar-fill" style="width:87%;background:var(--warning);">87%</div></div>
                            <span class="insights-bar-value">26/30</span>
                        </div>
                    </div>
                </div>

                <!-- Q32: Deploy Before/After -->
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Deploy Comparison</span>
                        <span class="insights-card-qid">Q32</span>
                    </div>
                    <div class="insights-card-body">
                        <table class="insights-table">
                            <thead><tr><th>Agent</th><th>Version</th><th>Success Before</th><th>Success After</th><th>Î”</th></tr></thead>
                            <tbody>
                                <tr>
                                    <td>support-triage-01</td>
                                    <td>1.0 â†’ 1.1</td>
                                    <td>91%</td>
                                    <td>96%</td>
                                    <td style="color:var(--success);font-weight:600;">+5%</td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="text-xs muted mt-8">Based on agent_version changes in registration events</div>
                    </div>
                </div>
            </div>

            <!-- Q33 + Q34 -->
            <div class="insights-grid-2 mb-16">
                <!-- Q33: Total Infrastructure Cost -->
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Total Infrastructure Cost</span>
                        <span class="insights-card-qid">Q33</span>
                    </div>
                    <div class="insights-card-body">
                        <div class="insights-big-number mb-8">$4.82</div>
                        <div class="text-xs mono muted">24h Â· 147 calls Â· 360K total tokens</div>
                        <div class="text-xs muted mt-8">Reported: $3.91 Â· Estimated: ~$0.91</div>
                    </div>
                </div>

                <!-- Q34: Cost/Task Trend -->
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Cost per Task Trend</span>
                        <span class="insights-card-qid">Q34</span>
                    </div>
                    <div class="insights-card-body">
                        <div class="insights-metric-row mb-8">
                            <span class="insights-big-number small">$0.06</span>
                            <span class="text-xs muted">avg/task</span>
                            <span class="insights-trend insights-trend--good-down">â†“ 18% cheaper</span>
                        </div>
                        <div class="chart-container">
                            <svg viewBox="0 0 400 80" height="80">
                                <polyline points="50,25 100,30 150,20 200,35 250,40 300,45 350,42 380,44" fill="none" stroke="var(--llm)" stroke-width="2"/>
                                <circle cx="50" cy="25" r="3" fill="var(--llm)"/>
                                <circle cx="380" cy="44" r="3" fill="var(--llm)"/>
                                <text x="50" y="70" font-size="9" fill="var(--text-muted)" font-family="var(--font-mono)">$0.09</text>
                                <text x="380" y="70" font-size="9" fill="var(--text-muted)" font-family="var(--font-mono)" text-anchor="end">$0.06</text>
                            </svg>
                        </div>
                        <div class="text-xs muted">Most expensive bucket: $0.14 at 02:00</div>
                    </div>
                </div>
            </div>

            <!-- Q35: ROI Calculator -->
            <div class="insights-card insights-card--full mb-16">
                <div class="insights-card-header">
                    <span class="insights-card-label">ROI Calculator</span>
                    <span class="insights-card-qid">Q35</span>
                </div>
                <div class="insights-card-body">
                    <div class="text-xs muted mb-8">Enter your pre-observability baselines to calculate ROI</div>
                    <div class="roi-inputs">
                        <div class="roi-input-group">
                            <label>Baseline Cost/Month ($)</label>
                            <input type="number" placeholder="e.g. 500" value="500"/>
                        </div>
                        <div class="roi-input-group">
                            <label>Baseline Avg Task Duration (s)</label>
                            <input type="number" placeholder="e.g. 180" value="180"/>
                        </div>
                        <div class="roi-input-group">
                            <label>Baseline Error Rate (%)</label>
                            <input type="number" placeholder="e.g. 15" value="15"/>
                        </div>
                    </div>
                    <div class="roi-result">
                        <div class="roi-result-item" style="flex:1;">
                            <div class="val">$355/mo</div>
                            <div class="lbl">Cost Savings</div>
                        </div>
                        <div class="roi-result-item" style="flex:1;">
                            <div class="val">52s</div>
                            <div class="lbl">Time Saved/Task</div>
                        </div>
                        <div class="roi-result-item" style="flex:1;">
                            <div class="val">9.2%</div>
                            <div class="lbl">Error Reduction</div>
                        </div>
                        <div class="roi-result-item" style="flex:1;">
                            <div class="val">$4,260/yr</div>
                            <div class="lbl">Projected Annual</div>
                        </div>
                    </div>
                    <div class="mt-8" style="text-align:right;">
                        <button class="refresh-btn" style="display:inline-flex;font-size:12px;padding:4px 12px;">ğŸ“‹ Copy as Text</button>
                    </div>
                </div>
            </div>

            <!-- Q36: Fleet Size -->
            <div class="insights-grid-3 mb-16">
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Fleet Size</span>
                        <span class="insights-card-qid">Q36</span>
                    </div>
                    <div class="insights-card-body">
                        <div class="insights-metric-row">
                            <span class="insights-big-number">5</span>
                            <span class="text-xs muted">agents</span>
                        </div>
                        <div class="mt-8 text-xs muted">
                            By environment: production=3, staging=2<br>
                            By type: support_agent=3, doc_processor=2<br>
                            +1 new agent in last 24h
                        </div>
                    </div>
                </div>

                <!-- Q37: Fleet Health Gauge -->
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Fleet Health</span>
                        <span class="insights-card-qid">Q37</span>
                    </div>
                    <div class="insights-card-body">
                        <div class="gauge-container">
                            <svg class="gauge-svg" viewBox="0 0 140 140">
                                <!-- Background circle -->
                                <circle cx="70" cy="70" r="58" fill="none" stroke="var(--border-subtle)" stroke-width="10"/>
                                <!-- Filled arc (72/100 = 72%) -->
                                <circle cx="70" cy="70" r="58" fill="none" stroke="var(--warning)" stroke-width="10"
                                    stroke-dasharray="262 364" stroke-dashoffset="91"
                                    stroke-linecap="round" transform="rotate(-90 70 70)"/>
                                <!-- Center text -->
                                <text x="70" y="65" text-anchor="middle" font-family="var(--font-sans)" font-size="28" font-weight="800" fill="var(--warning)">72</text>
                                <text x="70" y="82" text-anchor="middle" font-family="var(--font-sans)" font-size="10" font-weight="600" fill="var(--text-muted)">/ 100</text>
                            </svg>
                            <div class="gauge-label" style="color:var(--warning);">DEGRADED</div>
                        </div>
                        <div class="text-xs muted" style="text-align:center;">
                            Stuck: âˆ’15 Â· Error: âˆ’10 Â· Issues: âˆ’3
                        </div>
                    </div>
                </div>

                <!-- Q38: Scale Readiness -->
                <div class="insights-card">
                    <div class="insights-card-header">
                        <span class="insights-card-label">Scale Readiness</span>
                        <span class="insights-card-qid">Q38</span>
                    </div>
                    <div class="insights-card-body">
                        <div class="checklist-item">
                            <div class="check-icon check-pass">âœ“</div>
                            <div class="check-label">Success rate â‰¥ 90%</div>
                            <div class="check-value">94.2%</div>
                        </div>
                        <div class="checklist-item">
                            <div class="check-icon check-fail">âœ—</div>
                            <div class="check-label">No stuck agents</div>
                            <div class="check-value" style="color:var(--error);">1 stuck</div>
                        </div>
                        <div class="checklist-item">
                            <div class="check-icon check-pass">âœ“</div>
                            <div class="check-label">Queue manageable</div>
                            <div class="check-value">2 / 15</div>
                        </div>
                        <div class="checklist-item">
                            <div class="check-icon check-pass">âœ“</div>
                            <div class="check-label">Cost stable</div>
                            <div class="check-value">â†“ 18%</div>
                        </div>
                        <div class="checklist-item">
                            <div class="check-icon check-fail">âœ—</div>
                            <div class="check-label">No critical issues</div>
                            <div class="check-value" style="color:var(--error);">2 active</div>
                        </div>
                        <div class="checklist-item">
                            <div class="check-icon check-pass">âœ“</div>
                            <div class="check-label">Error rate &lt; 5%</div>
                            <div class="check-value">5.8%</div>
                        </div>
                        <div class="checklist-item">
                            <div class="check-icon check-fail">âœ—</div>
                            <div class="check-label">Heartbeats healthy</div>
                            <div class="check-value" style="color:var(--error);">1 stale</div>
                        </div>
                        <div class="verdict-banner verdict-banner--amber" style="margin-top:8px;">
                            âš  Address 3 items before scaling
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

</div>

<script>
// â”€â”€ Section Collapse/Expand â”€â”€
function toggleSection(idx) {
    const chevron = document.getElementById('chevron' + idx);
    const body = document.getElementById('body' + idx);
    const header = chevron.closest('.insights-section-header');
    const isExpanded = body.classList.contains('expanded');

    if (isExpanded) {
        body.classList.remove('expanded');
        chevron.classList.remove('expanded');
        header.classList.remove('expanded');
    } else {
        body.classList.add('expanded');
        chevron.classList.add('expanded');
        header.classList.add('expanded');
    }
}
</script>
</body>
</html>
